/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.data.ServiceStore"]){dojo._hasResource["dojox.data.ServiceStore"]=true;dojo.provide("dojox.data.ServiceStore");dojo.declare("dojox.data.ServiceStore",dojox.data.ClientFilter,{service:null,constructor:function(_1){this.byId=this.fetchItemByIdentity;this._index={};if(_1){dojo.mixin(this,_1);}this.idAttribute=(_1&&_1.idAttribute)||(this.schema&&this.schema._idAttr);this.labelAttribute=this.labelAttribute||"label";},schema:null,idAttribute:"id",syncMode:false,estimateCountFactor:1,getSchema:function(){return this.schema;},loadLazyValues:true,getValue:function(_2,_3,_4){var _5=_2[_3];return _5||(_3 in _2?_5:_2._loadObject?(dojox.rpc._sync=true)&&arguments.callee.call(this,dojox.data.ServiceStore.prototype.loadItem({item:_2})||{},_3,_4):_4);},getValues:function(_6,_7){var _8=this.getValue(_6,_7);return _8 instanceof Array?_8:_8===undefined?[]:[_8];},getAttributes:function(_9){var _a=[];for(var i in _9){if(_9.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){_a.push(i);}}return _a;},hasAttribute:function(_b,_c){return _c in _b;},containsValue:function(_d,_e,_f){return dojo.indexOf(this.getValues(_d,_e),_f)>-1;},isItem:function(_10){return (typeof _10=="object")&&_10&&!(_10 instanceof Date);},isItemLoaded:function(_11){return _11&&!_11._loadObject;},loadItem:function(_12){var _13;if(_12.item._loadObject){_12.item._loadObject(function(_14){_13=_14;delete _13._loadObject;var _15=_14 instanceof Error?_12.onError:_12.onItem;if(_15){_15.call(_12.scope,_14);}});}else{if(_12.onItem){_12.onItem.call(_12.scope,_12.item);}}return _13;},_currentId:0,_processResults:function(_16,_17){if(_16&&typeof _16=="object"){var id=_16.__id;if(!id){if(this.idAttribute){id=_16[this.idAttribute];}else{id=this._currentId++;}if(id!==undefined){var _18=this._index[id];if(_18){for(var j in _18){delete _18[j];}_16=dojo.mixin(_18,_16);}_16.__id=id;this._index[id]=_16;}}for(var i in _16){_16[i]=this._processResults(_16[i],_17).items;}var _19=_16.length;}return {totalCount:_17.request.count==_19?(_17.request.start||0)+_19*this.estimateCountFactor:_19,items:_16};},close:function(_1a){return _1a&&_1a.abort&&_1a.abort();},fetch:function(_1b){_1b=_1b||{};if("syncMode" in _1b?_1b.syncMode:this.syncMode){dojox.rpc._sync=true;}var _1c=this;var _1d=_1b.scope||_1c;var _1e=this.cachingFetch?this.cachingFetch(_1b):this._doQuery(_1b);_1e.request=_1b;_1e.addCallback(function(_1f){if(_1b.clientFetch){_1f=_1c.clientSideFetch({query:_1b.clientFetch,sort:_1b.sort,start:_1b.start,count:_1b.count},_1f);}var _20=_1c._processResults(_1f,_1e);_1f=_1b.results=_20.items;if(_1b.onBegin){_1b.onBegin.call(_1d,_20.totalCount,_1b);}if(_1b.onItem){for(var i=0;i<_1f.length;i++){_1b.onItem.call(_1d,_1f[i],_1b);}}if(_1b.onComplete){_1b.onComplete.call(_1d,_1b.onItem?null:_1f,_1b);}return _1f;});_1e.addErrback(_1b.onError&&dojo.hitch(_1d,_1b.onError));_1b.abort=function(){_1e.ioArgs.xhr.abort();};_1b.store=this;return _1b;},_doQuery:function(_21){var _22=typeof _21.queryStr=="string"?_21.queryStr:_21.query;return this.service(_22);},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true,"dojo.data.api.Schema":this.schema};},getLabel:function(_23){return this.getValue(_23,this.labelAttribute);},getLabelAttributes:function(_24){return [this.labelAttribute];},getIdentity:function(_25){return _25.__id;},getIdentityAttributes:function(_26){return [this.idAttribute];},fetchItemByIdentity:function(_27){var _28=this._index[(_27._prefix||"")+_27.identity];if(_28&&_27.onItem){if(_28._loadObject){_27.item=_28;this.loadItem(_27);}else{_27.onItem.call(_27.scope,_28);}}else{return this.fetch({query:_27.identity,onComplete:_27.onItem,onError:_27.onError,scope:_27.scope}).results;}return _28;}});}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(_29,_2a){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _2b=dojo.date.stamp._isoRegExp.exec(_29);var _2c=null;if(_2b){_2b.shift();if(_2b[1]){_2b[1]--;}if(_2b[6]){_2b[6]*=1000;}if(_2a){_2a=new Date(_2a);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(_2d){return _2a["get"+_2d]();}).forEach(function(_2e,_2f){if(_2b[_2f]===undefined){_2b[_2f]=_2e;}});}_2c=new Date(_2b[0]||1970,_2b[1]||0,_2b[2]||1,_2b[3]||0,_2b[4]||0,_2b[5]||0,_2b[6]||0);var _30=0;var _31=_2b[7]&&_2b[7].charAt(0);if(_31!="Z"){_30=((_2b[8]||0)*60)+(Number(_2b[9])||0);if(_31!="-"){_30*=-1;}}if(_31){_30-=_2c.getTimezoneOffset();}if(_30){_2c.setTime(_2c.getTime()+_30*60000);}}return _2c;};dojo.date.stamp.toISOString=function(_32,_33){var _34=function(n){return (n<10)?"0"+n:n;};_33=_33||{};var _35=[];var _36=_33.zulu?"getUTC":"get";var _37="";if(_33.selector!="time"){var _38=_32[_36+"FullYear"]();_37=["0000".substr((_38+"").length)+_38,_34(_32[_36+"Month"]()+1),_34(_32[_36+"Date"]())].join("-");}_35.push(_37);if(_33.selector!="date"){var _39=[_34(_32[_36+"Hours"]()),_34(_32[_36+"Minutes"]()),_34(_32[_36+"Seconds"]())].join(":");var _3a=_32[_36+"Milliseconds"]();if(_33.milliseconds){_39+="."+(_3a<100?"0":"")+_34(_3a);}if(_33.zulu){_39+="Z";}else{if(_33.selector!="time"){var _3b=_32.getTimezoneOffset();var _3c=Math.abs(_3b);_39+=(_3b>0?"-":"+")+_34(Math.floor(_3c/60))+":"+_34(_3c%60);}}_35.push(_39);}return _35.join("T");};}if(!dojo._hasResource["dojox.json.ref"]){dojo._hasResource["dojox.json.ref"]=true;dojo.provide("dojox.json.ref");dojox.json.ref={resolveJson:function(_3d,_3e){_3e=_3e||{};var _3f=_3e.idAttribute||"id";var _40=this.refAttribute;var _41=_3e.idPrefix||"";var _42=_3e.assignAbsoluteIds;var _43=_3e.index||{};var _44=_3e.timeStamps;var ref,_45=[];var _46=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var _47=this._addProp;var F=function(){};function _48(it,_49,_4a,_4b,_4c,_4d){var i,_4e,val,id=_3f in it?it[_3f]:_4a;if(_3f in it||((id!==undefined)&&_4b)){id=(_41+id).replace(_46,"$2$3");}var _4f=_4d||it;if(id!==undefined){if(_42){it.__id=id;}if(_3e.schemas&&(!(it instanceof Array))&&(val=id.match(/^(.+\/)[^\.\[]*$/))){_4c=_3e.schemas[val[1]];}if(_43[id]&&((it instanceof Array)==(_43[id] instanceof Array))){_4f=_43[id];delete _4f.$ref;delete _4f._loadObject;_4e=true;}else{var _50=_4c&&_4c.prototype;if(_50){F.prototype=_50;_4f=new F();}}_43[id]=_4f;if(_44){_44[id]=_3e.time;}}while(_4c){var _51=_4c.properties;if(_51){for(i in it){var _52=_51[i];if(_52&&_52.format=="date-time"&&typeof it[i]=="string"){it[i]=dojo.date.stamp.fromISOString(it[i]);}}}_4c=_4c["extends"];}var _53=it.length;for(i in it){if(i==_53){break;}if(it.hasOwnProperty(i)){val=it[i];if((typeof val=="object")&&val&&!(val instanceof Date)&&i!="__parent"){ref=val[_40];if(!ref||!val.__parent){val.__parent=it;}if(ref){delete it[i];var _54=ref.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if((ref=(_54[1]=="$"||_54[1]=="this"||_54[1]=="")?_3d:_43[(_41+_54[1]).replace(_46,"$2$3")])){if(_54[3]){_54[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d];});}}if(ref){val=ref;}else{if(!_49){var _55;if(!_55){_45.push(_4f);}_55=true;val=_48(val,false,val[_40],true,_52);val._loadObject=_3e.loader;}}}else{if(!_49){val=_48(val,_45==it,id===undefined?undefined:_47(id,i),false,_52,_4f!=it&&typeof _4f[i]=="object"&&_4f[i]);}}}it[i]=val;if(_4f!=it&&!_4f.__isDirty){var old=_4f[i];_4f[i]=val;if(_4e&&val!==old&&!_4f._loadObject&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&i!="$ref"&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&_43.onUpdate){_43.onUpdate(_4f,i,old,val);}}}}if(_4e&&(_3f in it)){for(i in _4f){if(!_4f.__isDirty&&_4f.hasOwnProperty(i)&&!it.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&!(_4f instanceof Array&&isNaN(i))){if(_43.onUpdate&&i!="_loadObject"&&i!="_idAttr"){_43.onUpdate(_4f,i,_4f[i],undefined);}delete _4f[i];while(_4f instanceof Array&&_4f.length&&_4f[_4f.length-1]===undefined){_4f.length--;}}}}else{if(_43.onLoad){_43.onLoad(_4f);}}return _4f;};if(_3d&&typeof _3d=="object"){_3d=_48(_3d,false,_3e.defaultId,true);_48(_45,false);}return _3d;},fromJson:function(str,_56){function ref(_57){var _58={};_58[this.refAttribute]=_57;return _58;};try{var _59=eval("("+str+")");}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(_59){return this.resolveJson(_59,_56);}return _59;},toJson:function(it,_5a,_5b,_5c){var _5d=this._useRefs;var _5e=this._addProp;var _5f=this.refAttribute;_5b=_5b||"";var _60={};var _61={};function _62(it,_63,_64){if(typeof it=="object"&&it){var _65;if(it instanceof Date){return "\""+dojo.date.stamp.toISOString(it,{zulu:true})+"\"";}var id=it.__id;if(id){if(_63!="#"&&((_5d&&!id.match(/#/))||_60[id])){var ref=id;if(id.charAt(0)!="#"){if(it.__clientId==id){ref="cid:"+id;}else{if(id.substring(0,_5b.length)==_5b){ref=id.substring(_5b.length);}else{ref=id;}}}var _66={};_66[_5f]=ref;return _62(_66,"#");}_63=id;}else{it.__id=_63;_61[_63]=it;}_60[_63]=it;_64=_64||"";var _67=_5a?_64+dojo.toJsonIndentStr:"";var _68=_5a?"\n":"";var sep=_5a?" ":"";if(it instanceof Array){var res=dojo.map(it,function(obj,i){var val=_62(obj,_5e(_63,i),_67);if(typeof val!="string"){val="undefined";}return _68+_67+val;});return "["+res.join(","+sep)+_68+_64+"]";}var _69=[];for(var i in it){if(it.hasOwnProperty(i)){var _6a;if(typeof i=="number"){_6a="\""+i+"\"";}else{if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_")){_6a=dojo._escapeString(i);}else{continue;}}var val=_62(it[i],_5e(_63,i),_67);if(typeof val!="string"){continue;}_69.push(_68+_67+_6a+":"+sep+val);}}return "{"+_69.join(","+sep)+_68+_64+"}";}else{if(typeof it=="function"&&dojox.json.ref.serializeFunctions){return it.toString();}}return dojo.toJson(it);};var _6b=_62(it,"#","");if(!_5c){for(var i in _61){delete _61[i].__id;}}return _6b;},_addProp:function(id,_6c){return id+(id.match(/#/)?id.length==1?"":".":"#")+_6c;},refAttribute:"$ref",_useRefs:false,serializeFunctions:false};}if(!dojo._hasResource["dojox.rpc.Rest"]){dojo._hasResource["dojox.rpc.Rest"]=true;dojo.provide("dojox.rpc.Rest");(function(){if(dojox.rpc&&dojox.rpc.transportRegistry){dojox.rpc.transportRegistry.register("REST",function(str){return str=="REST";},{getExecutor:function(_6d,_6e,svc){return new dojox.rpc.Rest(_6e.name,(_6e.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,_6f){var _70=svc._getRequest(_6e,[id]);_70.url=_70.target+(_70.data?"?"+_70.data:"");return _70;});}});}var drr;function _71(_72,_73,_74,id){_72.addCallback(function(_75){if(_74){_74=_72.ioArgs.xhr&&_72.ioArgs.xhr.getResponseHeader("Content-Range");_72.fullLength=_74&&(_74=_74.match(/\/(.*)/))&&parseInt(_74[1]);}return _75;});return _72;};drr=dojox.rpc.Rest=function(_76,_77,_78,_79){var _7a;_7a=function(id,_7b){return drr._get(_7a,id,_7b);};_7a.isJson=_77;_7a._schema=_78;_7a.cache={serialize:_77?((dojox.json&&dojox.json.ref)||dojo).toJson:function(_7c){return _7c;}};_7a._getRequest=_79||function(id,_7d){if(dojo.isObject(id)){var _7e=_7d.sort&&_7d.sort[0];if(_7e&&_7e.attribute){id.sort=(_7e.descending?"-":"")+_7e.attribute;}id=dojo.objectToQuery(id);id=id?"?"+id:"";}var _7f={url:_76+(id==null?"":id),handleAs:_77?"json":"text",contentType:_77?"application/json":"text/plain",sync:dojox.rpc._sync,headers:{Accept:_77?"application/json,application/javascript":"*/*"}};if(_7d&&(_7d.start>=0||_7d.count>=0)){_7f.headers.Range="items="+(_7d.start||"0")+"-"+((_7d.count&&_7d.count!=Infinity&&(_7d.count+(_7d.start||0)-1))||"");}dojox.rpc._sync=false;return _7f;};function _80(_81){_7a[_81]=function(id,_82){return drr._change(_81,_7a,id,_82);};};_80("put");_80("post");_80("delete");_7a.servicePath=_76;return _7a;};drr._index={};drr._timeStamps={};drr._change=function(_83,_84,id,_85){var _86=_84._getRequest(id);_86[_83+"Data"]=_85;return _71(dojo.xhr(_83.toUpperCase(),_86,true),_84);};drr._get=function(_87,id,_88){_88=_88||{};return _71(dojo.xhrGet(_87._getRequest(id,_88)),_87,(_88.start>=0||_88.count>=0),id);};})();}if(!dojo._hasResource["dojox.rpc.JsonRest"]){dojo._hasResource["dojox.rpc.JsonRest"]=true;dojo.provide("dojox.rpc.JsonRest");(function(){var _89=[];var _8a=dojox.rpc.Rest;var jr;function _8b(_8c,_8d,_8e,_8f){var _90=_8d.ioArgs&&_8d.ioArgs.xhr&&_8d.ioArgs.xhr.getResponseHeader("Last-Modified");if(_90&&_8a._timeStamps){_8a._timeStamps[_8f]=_90;}return _8e&&dojox.json.ref.resolveJson(_8e,{defaultId:_8f,index:_8a._index,timeStamps:_90&&_8a._timeStamps,time:_90,idPrefix:_8c.servicePath.replace(/[^\/]*$/,""),idAttribute:jr.getIdAttribute(_8c),schemas:jr.schemas,loader:jr._loader,assignAbsoluteIds:true});};jr=dojox.rpc.JsonRest={serviceClass:dojox.rpc.Rest,conflictDateHeader:"If-Unmodified-Since",commit:function(_91){_91=_91||{};var _92=[];var _93={};var _94=[];for(var i=0;i<_89.length;i++){var _95=_89[i];var _96=_95.object;var old=_95.old;var _97=false;if(!(_91.service&&(_96||old)&&(_96||old).__id.indexOf(_91.service.servicePath))&&_95.save){delete _96.__isDirty;if(_96){if(old){var _98;if((_98=_96.__id.match(/(.*)#.*/))){_96=_8a._index[_98[1]];}if(!(_96.__id in _93)){_93[_96.__id]=_96;_92.push({method:"put",target:_96,content:_96});}}else{_92.push({method:"post",target:{__id:jr.getServiceAndId(_96.__id).service.servicePath},content:_96});}}else{if(old){_92.push({method:"delete",target:old});}}_94.push(_95);_89.splice(i--,1);}}dojo.connect(_91,"onError",function(){var _99=_89;_89=_94;var _9a=0;jr.revert();_89=_99;});jr.sendToServer(_92,_91);return _92;},sendToServer:function(_9b,_9c){var _9d;var _9e=dojo.xhr;var _9f=_9b.length;var i,_a0;var _a1;var _a2=this.conflictDateHeader;dojo.xhr=function(_a3,_a4){_a4.headers=_a4.headers||{};_a4.headers["Transaction"]=_9b.length-1==i?"commit":"open";if(_a2&&_a1){_a4.headers[_a2]=_a1;}if(_a0){_a4.headers["Content-ID"]="<"+_a0+">";}return _9e.apply(dojo,arguments);};for(i=0;i<_9b.length;i++){var _a5=_9b[i];dojox.rpc.JsonRest._contentId=_a5.content&&_a5.content.__id;var _a6=_a5.method=="post";_a1=_a5.method=="put"&&_8a._timeStamps[_a5.content.__id];if(_a1){_8a._timeStamps[_a5.content.__id]=(new Date())+"";}_a0=_a6&&dojox.rpc.JsonRest._contentId;var _a7=jr.getServiceAndId(_a5.target.__id);var _a8=_a7.service;var dfd=_a5.deferred=_a8[_a5.method](_a7.id.replace(/#/,""),dojox.json.ref.toJson(_a5.content,false,_a8.servicePath,true));(function(_a9,dfd,_aa){dfd.addCallback(function(_ab){try{var _ac=dfd.ioArgs.xhr&&dfd.ioArgs.xhr.getResponseHeader("Location");if(_ac){var _ad=_ac.match(/(^\w+:\/\/)/)&&_ac.indexOf(_aa.servicePath);_ac=_ad>0?_ac.substring(_ad):(_aa.servicePath+_ac).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");_a9.__id=_ac;_8a._index[_ac]=_a9;}_ab=_8b(_aa,dfd,_ab,_a9&&_a9.__id);}catch(e){}if(!(--_9f)){if(_9c.onComplete){_9c.onComplete.call(_9c.scope);}}return _ab;});})(_a5.content,dfd,_a8);dfd.addErrback(function(_ae){_9f=-1;_9c.onError.call(_9c.scope,_ae);});}dojo.xhr=_9e;},getDirtyObjects:function(){return _89;},revert:function(_af){for(var i=_89.length;i>0;){i--;var _b0=_89[i];var _b1=_b0.object;var old=_b0.old;if(!(_af&&(_b1||old)&&(_b1||old).__id.indexOf(_af.servicePath))){if(_b1&&old){for(var j in old){if(old.hasOwnProperty(j)){_b1[j]=old[j];}}for(j in _b1){if(!old.hasOwnProperty(j)){delete _b1[j];}}}delete (_b1||old).__isDirty;_89.splice(i,1);}}},changing:function(_b2,_b3){if(!_b2.__id){return;}_b2.__isDirty=true;for(var i=0;i<_89.length;i++){var _b4=_89[i];if(_b2==_b4.object){if(_b3){_b4.object=false;if(!this._saveNotNeeded){_b4.save=true;}}return;}}var old=_b2 instanceof Array?[]:{};for(i in _b2){if(_b2.hasOwnProperty(i)){old[i]=_b2[i];}}_89.push({object:!_b3&&_b2,old:old,save:!this._saveNotNeeded});},deleteObject:function(_b5){this.changing(_b5,true);},getConstructor:function(_b6,_b7){if(typeof _b6=="string"){var _b8=_b6;_b6=new dojox.rpc.Rest(_b6,true);this.registerService(_b6,_b8,_b7);}if(_b6._constructor){return _b6._constructor;}_b6._constructor=function(_b9){var _ba=this;var _bb=arguments;var _bc;var _bd;function _be(_bf){if(_bf){_be(_bf["extends"]);_bc=_bf.properties;for(var i in _bc){var _c0=_bc[i];if(_c0&&(typeof _c0=="object")&&("default" in _c0)){_ba[i]=_c0["default"];}}}if(_bf&&_bf.prototype&&_bf.prototype.initialize){_bd=true;_bf.prototype.initialize.apply(_ba,_bb);}};_be(_b6._schema);if(!_bd&&_b9&&typeof _b9=="object"){dojo.mixin(_ba,_b9);}var _c1=jr.getIdAttribute(_b6);_8a._index[this.__id=this.__clientId=_b6.servicePath+(this[_c1]||Math.random().toString(16).substring(2,14)+"@"+((dojox.rpc.Client&&dojox.rpc.Client.clientId)||"client"))]=this;if(dojox.json.schema&&_bc){dojox.json.schema.mustBeValid(dojox.json.schema.validate(this,_b6._schema));}_89.push({object:this,save:true});};return dojo.mixin(_b6._constructor,_b6._schema,{load:_b6});},fetch:function(_c2){var _c3=jr.getServiceAndId(_c2);return this.byId(_c3.service,_c3.id);},getIdAttribute:function(_c4){var _c5=_c4._schema;var _c6;if(_c5){if(!(_c6=_c5._idAttr)){for(var i in _c5.properties){if(_c5.properties[i].identity){_c5._idAttr=_c6=i;}}}}return _c6||"id";},getServiceAndId:function(_c7){var _c8="";for(var _c9 in jr.services){if((_c7.substring(0,_c9.length)==_c9)&&(_c9.length>=_c8.length)){_c8=_c9;}}if(_c8){return {service:jr.services[_c8],id:_c7.substring(_c8.length)};}var _ca=_c7.match(/^(.*\/)([^\/]*)$/);return {service:new jr.serviceClass(_ca[1],true),id:_ca[2]};},services:{},schemas:{},registerService:function(_cb,_cc,_cd){_cc=_cb.servicePath=_cc||_cb.servicePath;_cb._schema=jr.schemas[_cc]=_cd||_cb._schema||{};jr.services[_cc]=_cb;},byId:function(_ce,id){var _cf,_d0=_8a._index[(_ce.servicePath||"")+id];if(_d0&&!_d0._loadObject){_cf=new dojo.Deferred();_cf.callback(_d0);return _cf;}return this.query(_ce,id);},query:function(_d1,id,_d2){var _d3=_d1(id,_d2);_d3.addCallback(function(_d4){if(_d4.nodeType&&_d4.cloneNode){return _d4;}return _8b(_d1,_d3,_d4,typeof id!="string"||(_d2&&(_d2.start||_d2.count))?undefined:id);});return _d3;},_loader:function(_d5){var _d6=jr.getServiceAndId(this.__id);var _d7=this;jr.query(_d6.service,_d6.id).addBoth(function(_d8){if(_d8==_d7){delete _d8.$ref;delete _d8._loadObject;}else{_d7._loadObject=function(_d9){_d9(_d8);};}_d5(_d8);});},isDirty:function(_da){if(!_da){return !!_89.length;}return _da.__isDirty;}};})();}if(!dojo._hasResource["dojox.data.JsonRestStore"]){dojo._hasResource["dojox.data.JsonRestStore"]=true;dojo.provide("dojox.data.JsonRestStore");dojo.declare("dojox.data.JsonRestStore",dojox.data.ServiceStore,{constructor:function(_db){dojo.connect(dojox.rpc.Rest._index,"onUpdate",this,function(obj,_dc,_dd,_de){var _df=this.service.servicePath;if(!obj.__id){console.log("no id on updated object ",obj);}else{if(obj.__id.substring(0,_df.length)==_df){this.onSet(obj,_dc,_dd,_de);}}});this.idAttribute=this.idAttribute||"id";if(typeof this.target=="string"){this.target=this.target.match(/\/$/)||this.allowNoTrailingSlash?this.target:(this.target+"/");if(!this.service){this.service=dojox.rpc.JsonRest.services[this.target]||dojox.rpc.Rest(this.target,true);}}dojox.rpc.JsonRest.registerService(this.service,this.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.schema._idAttr=this.idAttribute;var _e0=dojox.rpc.JsonRest.getConstructor(this.service);var _e1=this;this._constructor=function(_e2){_e0.call(this,_e2);_e1.onNew(this);};this._constructor.prototype=_e0.prototype;this._index=dojox.rpc.Rest._index;},referenceIntegrity:true,target:"",allowNoTrailingSlash:false,newItem:function(_e3,_e4){_e3=new this._constructor(_e3);if(_e4){var _e5=this.getValue(_e4.parent,_e4.attribute,[]);_e5=_e5.concat([_e3]);_e3.__parent=_e5;this.setValue(_e4.parent,_e4.attribute,_e5);}return _e3;},deleteItem:function(_e6){var _e7=[];var _e8=dojox.data._getStoreForItem(_e6)||this;if(this.referenceIntegrity){dojox.rpc.JsonRest._saveNotNeeded=true;var _e9=dojox.rpc.Rest._index;var _ea=function(_eb){var _ec;_e7.push(_eb);_eb.__checked=1;for(var i in _eb){var _ed=_eb[i];if(_ed==_e6){if(_eb!=_e9){if(_eb instanceof Array){(_ec=_ec||[]).push(i);}else{(dojox.data._getStoreForItem(_eb)||_e8).unsetAttribute(_eb,i);}}}else{if((typeof _ed=="object")&&_ed){if(!_ed.__checked){_ea(_ed);}if(typeof _ed.__checked=="object"&&_eb!=_e9){(dojox.data._getStoreForItem(_eb)||_e8).setValue(_eb,i,_ed.__checked);}}}}if(_ec){i=_ec.length;_eb=_eb.__checked=_eb.concat();while(i--){_eb.splice(_ec[i],1);}return _eb;}return null;};_ea(_e9);dojox.rpc.JsonRest._saveNotNeeded=false;var i=0;while(_e7[i]){delete _e7[i++].__checked;}}dojox.rpc.JsonRest.deleteObject(_e6);_e8.onDelete(_e6);},changing:function(_ee,_ef){dojox.rpc.JsonRest.changing(_ee,_ef);},setValue:function(_f0,_f1,_f2){var old=_f0[_f1];var _f3=_f0.__id?dojox.data._getStoreForItem(_f0):this;if(dojox.json.schema&&_f3.schema&&_f3.schema.properties){dojox.json.schema.mustBeValid(dojox.json.schema.checkPropertyChange(_f2,_f3.schema.properties[_f1]));}if(_f1==_f3.idAttribute){throw new Error("Can not change the identity attribute for an item");}_f3.changing(_f0);_f0[_f1]=_f2;if(_f2&&!_f2.__parent){_f2.__parent=_f0;}_f3.onSet(_f0,_f1,old,_f2);},setValues:function(_f4,_f5,_f6){if(!dojo.isArray(_f6)){throw new Error("setValues expects to be passed an Array object as its value");}this.setValue(_f4,_f5,_f6);},unsetAttribute:function(_f7,_f8){this.changing(_f7);var old=_f7[_f8];delete _f7[_f8];this.onSet(_f7,_f8,old,undefined);},save:function(_f9){if(!(_f9&&_f9.global)){(_f9=_f9||{}).service=this.service;}if("syncMode" in _f9?_f9.syncMode:this.syncMode){dojox.rpc._sync=true;}var _fa=dojox.rpc.JsonRest.commit(_f9);this.serverVersion=this._updates&&this._updates.length;return _fa;},revert:function(_fb){var _fc=dojox.rpc.JsonRest.getDirtyObjects().concat([]);while(_fc.length>0){var d=_fc.pop();var _fd=dojox.data._getStoreForItem(d.object||d.old);if(!d.object){_fd.onNew(d.old);}else{if(!d.old){_fd.onDelete(d.object);}else{for(var i in d.object){if(d.object[i]!=d.old[i]){_fd.onSet(d.object,i,d.object[i],d.old[i]);}}}}}dojox.rpc.JsonRest.revert(_fb&&_fb.global&&this.service);},isDirty:function(_fe){return dojox.rpc.JsonRest.isDirty(_fe);},isItem:function(_ff,_100){return _ff&&_ff.__id&&(_100||this.service==dojox.rpc.JsonRest.getServiceAndId(_ff.__id).service);},_doQuery:function(args){var _101=typeof args.queryStr=="string"?args.queryStr:args.query;return dojox.rpc.JsonRest.query(this.service,_101,args);},_processResults:function(_102,_103){var _104=_102.length;return {totalCount:_103.fullLength||(_103.request.count==_104?(_103.request.start||0)+_104*2:_104),items:_102};},getConstructor:function(){return this._constructor;},getIdentity:function(item){var id=item.__clientId||item.__id;if(!id){return id;}var _105=this.service.servicePath.replace(/[^\/]*$/,"");return id.substring(0,_105.length)!=_105?id:id.substring(_105.length);},fetchItemByIdentity:function(args){var id=args.identity;var _106=this;if(id.toString().match(/^(\w*:)?\//)){var _107=dojox.rpc.JsonRest.getServiceAndId(id);_106=_107.service._store;args.identity=_107.id;}args._prefix=_106.service.servicePath.replace(/[^\/]*$/,"");return _106.inherited(arguments);},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var _108=this.inherited(arguments);_108["dojo.data.api.Write"]=true;_108["dojo.data.api.Notification"]=true;return _108;},getParent:function(item){return item&&item.__parent;}});dojox.data.JsonRestStore.getStore=function(_109,_10a){if(typeof _109.target=="string"){_109.target=_109.target.match(/\/$/)||_109.allowNoTrailingSlash?_109.target:(_109.target+"/");var _10b=(dojox.rpc.JsonRest.services[_109.target]||{})._store;if(_10b){return _10b;}}return new (_10a||dojox.data.JsonRestStore)(_109);};dojox.data._getStoreForItem=function(item){if(item.__id){var _10c=dojox.rpc.JsonRest.getServiceAndId(item.__id);if(_10c&&_10c.service._store){return _10c.service._store;}else{var _10d=item.__id.toString().match(/.*\//)[0];return new dojox.data.JsonRestStore({target:_10d});}}return null;};dojox.json.ref._useRefs=true;}if(!dojo._hasResource["dojox.data.util.JsonQuery"]){dojo._hasResource["dojox.data.util.JsonQuery"]=true;dojo.provide("dojox.data.util.JsonQuery");dojo.declare("dojox.data.util.JsonQuery",null,{useFullIdInQueries:false,_toJsonQuery:function(args,_10e){var _10f=true;var self=this;function _110(path,_111){var _112=_111.__id;if(_112){var _113={};_113[self.idAttribute]=self.useFullIdInQueries?_111.__id:_111[self.idAttribute];_111=_113;}for(var i in _111){var _114=_111[i];var _115=path+(/^[a-zA-Z_][\w_]*$/.test(i)?"."+i:"["+dojo._escapeString(i)+"]");if(_114&&typeof _114=="object"){_110(_115,_114);}else{if(_114!="*"){_116+=(_10f?"":"&")+_115+((!_112&&typeof _114=="string"&&args.queryOptions&&args.queryOptions.ignoreCase)?"~":"=")+dojo.toJson(_114);_10f=false;}}}};if(args.query&&typeof args.query=="object"){var _116="[?(";_110("@",args.query);if(!_10f){_116+=")]";}else{_116="";}args.queryStr=_116.replace(/\\"|"/g,function(t){return t=="\""?"'":t;});}else{if(!args.query||args.query=="*"){args.query="";}}var sort=args.sort;if(sort){args.queryStr=args.queryStr||(typeof args.query=="string"?args.query:"");_10f=true;for(i=0;i<sort.length;i++){args.queryStr+=(_10f?"[":",")+(sort[i].descending?"\\":"/")+"@["+dojo._escapeString(sort[i].attribute)+"]";_10f=false;}if(!_10f){args.queryStr+="]";}}if(_10e&&(args.start||args.count)){args.queryStr=(args.queryStr||(typeof args.query=="string"?args.query:""))+"["+(args.start||"")+":"+(args.count?(args.start||0)+args.count:"")+"]";}if(typeof args.queryStr=="string"){args.queryStr=args.queryStr.replace(/\\"|"/g,function(t){return t=="\""?"'":t;});return args.queryStr;}return args.query;},jsonQueryPagination:true,fetch:function(args){this._toJsonQuery(args,this.jsonQueryPagination);return this.inherited(arguments);},isUpdateable:function(){return true;},matchesQuery:function(item,_117){_117._jsonQuery=_117._jsonQuery||dojox.json.query(this._toJsonQuery(_117));return _117._jsonQuery([item]).length;},clientSideFetch:function(_118,_119){_118._jsonQuery=_118._jsonQuery||dojox.json.query(this._toJsonQuery(_118));return this.clientSidePaging(_118,_118._jsonQuery(_119));},querySuperSet:function(_11a,_11b){if(!_11a.query){return _11b.query;}return this.inherited(arguments);}});}if(!dojo._hasResource["dojox.data.JsonQueryRestStore"]){dojo._hasResource["dojox.data.JsonQueryRestStore"]=true;dojo.provide("dojox.data.JsonQueryRestStore");dojo.requireIf(!!dojox.data.ClientFilter,"dojox.json.query");dojo.declare("dojox.data.JsonQueryRestStore",[dojox.data.JsonRestStore,dojox.data.util.JsonQuery],{matchesQuery:function(item,_11c){return item.__id&&(item.__id.indexOf("#")==-1)&&this.inherited(arguments);}});}if(!dojo._hasResource["dojox.rpc.Client"]){dojo._hasResource["dojox.rpc.Client"]=true;dojo.provide("dojox.rpc.Client");(function(){dojo._defaultXhr=dojo.xhr;dojo.xhr=function(_11d,args){var _11e=args.headers=args.headers||{};_11e["Client-Id"]=dojox.rpc.Client.clientId;_11e["Seq-Id"]=dojox._reqSeqId=(dojox._reqSeqId||0)+1;return dojo._defaultXhr.apply(dojo,arguments);};})();dojox.rpc.Client.clientId=(Math.random()+"").substring(2,14)+(new Date().getTime()+"").substring(8,13);}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_11f){this.pairs=[];this.returnWrappers=_11f||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_120,wrap,_121,_122){this.pairs[((_122)?"unshift":"push")]([name,_120,wrap,_121]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dojox.io.xhrPlugins"]){dojo._hasResource["dojox.io.xhrPlugins"]=true;dojo.provide("dojox.io.xhrPlugins");(function(){var _123;var _124;function _125(){return _124=dojox.io.xhrPlugins.plainXhr=_124||dojo._defaultXhr||dojo.xhr;};dojox.io.xhrPlugins.register=function(){if(!_123){_123=new dojo.AdapterRegistry();dojo[dojo._defaultXhr?"_defaultXhr":"xhr"]=function(_126,args,_127){return _123.match.apply(_123,arguments);};_123.register("xhr",function(_128,args){if(!args.url.match(/^\w*:\/\//)){return true;}var root=window.location.href.match(/^.*?\/\/.*?\//)[0];return args.url.substring(0,root.length)==root;},_125());}return _123.register.apply(_123,arguments);};dojox.io.xhrPlugins.addProxy=function(_129){var _12a=_125();dojox.io.xhrPlugins.register("proxy",function(_12b,args){return true;},function(_12c,args,_12d){args.url=_129+encodeURIComponent(args.url);return _12a.call(dojo,_12c,args,_12d);});};var _12e;dojox.io.xhrPlugins.addCrossSiteXhr=function(url,_12f){var _130=_125();if(_12e===undefined&&window.XMLHttpRequest){try{var xhr=new XMLHttpRequest();xhr.open("GET","http://testing-cross-domain-capability.com",true);_12e=true;dojo.config.noRequestedWithHeaders=true;}catch(e){_12e=false;}}dojox.io.xhrPlugins.register("cs-xhr",function(_131,args){return (_12e||(window.XDomainRequest&&args.sync!==true&&(_131=="GET"||_131=="POST"||_12f)))&&(args.url.substring(0,url.length)==url);},_12e?_130:function(){var _132=dojo._xhrObj;dojo._xhrObj=function(){var xdr=new XDomainRequest();xdr.readyState=1;xdr.setRequestHeader=function(){};xdr.getResponseHeader=function(_133){return _133=="Content-Type"?xdr.contentType:null;};function _134(_135,_136){return function(){xdr.readyState=_136;xdr.status=_135;};};xdr.onload=_134(200,4);xdr.onprogress=_134(200,3);xdr.onerror=_134(404,4);return xdr;};var dfd=(_12f?_12f(_125()):_125()).apply(dojo,arguments);dojo._xhrObj=_132;return dfd;});};dojox.io.xhrPlugins.fullHttpAdapter=function(_137,_138){return function(_139,args,_13a){var _13b={};var _13c={};if(_139!="GET"){_13c["http-method"]=_139;if(args.putData&&_138){_13b["http-content"]=args.putData;delete args.putData;_13a=false;}if(args.postData&&_138){_13b["http-content"]=args.postData;delete args.postData;_13a=false;}_139="POST";}for(var i in args.headers){var _13d=i.match(/^X-/)?i.substring(2).replace(/-/g,"_").toLowerCase():("http-"+i);_13c[_13d]=args.headers[i];}args.query=dojo.objectToQuery(_13c);dojo._ioAddQueryToUrl(args);args.content=dojo.mixin(args.content||{},_13b);return _137.call(dojo,_139,args,_13a);};};})();}if(!dojo._hasResource["dojo.io.script"]){dojo._hasResource["dojo.io.script"]=true;dojo.provide("dojo.io.script");(function(){var _13e=dojo.isIE?"onreadystatechange":"load",_13f=/complete|loaded/;dojo.io.script={get:function(args){var dfd=this._makeScriptDeferred(args);var _140=dfd.ioArgs;dojo._ioAddQueryToUrl(_140);dojo._ioNotifyStart(dfd);if(this._canAttach(_140)){var node=this.attach(_140.id,_140.url,args.frameDoc);if(!_140.jsonp&&!_140.args.checkString){var _141=dojo.connect(node,_13e,function(evt){if(evt.type=="load"||_13f.test(node.readyState)){dojo.disconnect(_141);_140.scriptLoaded=evt;}});}}dojo._ioWatch(dfd,this._validCheck,this._ioCheck,this._resHandle);return dfd;},attach:function(id,url,_142){var doc=(_142||dojo.doc);var _143=doc.createElement("script");_143.type="text/javascript";_143.src=url;_143.id=id;_143.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_143);},remove:function(id,_144){dojo.destroy(dojo.byId(id,_144));if(this["jsonp_"+id]){delete this["jsonp_"+id];}},_makeScriptDeferred:function(args){var dfd=dojo._ioSetArgs(args,this._deferredCancel,this._deferredOk,this._deferredError);var _145=dfd.ioArgs;_145.id=dojo._scopeName+"IoScript"+(this._counter++);_145.canDelete=false;_145.jsonp=args.callbackParamName||args.jsonp;if(_145.jsonp){_145.query=_145.query||"";if(_145.query.length>0){_145.query+="&";}_145.query+=_145.jsonp+"="+(args.frameDoc?"parent.":"")+dojo._scopeName+".io.script.jsonp_"+_145.id+"._jsonpCallback";_145.frameDoc=args.frameDoc;_145.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_145.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;if(dfd.ioArgs.canDelete){dojo.io.script._addDeadScript(dfd.ioArgs);}},_deferredOk:function(dfd){var _146=dfd.ioArgs;if(_146.canDelete){dojo.io.script._addDeadScript(_146);}return _146.json||_146.scriptLoaded||_146;},_deferredError:function(_147,dfd){if(dfd.ioArgs.canDelete){if(_147.dojoType=="timeout"){dojo.io.script.remove(dfd.ioArgs.id,dfd.ioArgs.frameDoc);}else{dojo.io.script._addDeadScript(dfd.ioArgs);}}console.log("dojo.io.script error",_147);return _147;},_deadScripts:[],_counter:1,_addDeadScript:function(_148){dojo.io.script._deadScripts.push({id:_148.id,frameDoc:_148.frameDoc});_148.frameDoc=null;},_validCheck:function(dfd){var _149=dojo.io.script;var _14a=_149._deadScripts;if(_14a&&_14a.length>0){for(var i=0;i<_14a.length;i++){_149.remove(_14a[i].id,_14a[i].frameDoc);_14a[i].frameDoc=null;}dojo.io.script._deadScripts=[];}return true;},_ioCheck:function(dfd){var _14b=dfd.ioArgs;if(_14b.json||(_14b.scriptLoaded&&!_14b.args.checkString)){return true;}var _14c=_14b.args.checkString;if(_14c&&eval("typeof("+_14c+") != 'undefined'")){return true;}return false;},_resHandle:function(dfd){if(dojo.io.script._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(_14d){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;}};})();}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(_14e,_14f,uri){if(window[_14e]){return window[_14e];}if(window.frames[_14e]){return window.frames[_14e];}var _150=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _151=dojo.isIE?"<iframe name=\""+_14e+"\" src=\""+turi+"\" onload=\""+_14f+"\">":"iframe";_150=dojo.doc.createElement(_151);with(_150){name=_14e;setAttribute("name",_14e);id=_14e;}dojo.body().appendChild(_150);window[_14e]=_150;with(_150.style){if(!(dojo.isSafari<3)){position="absolute";}left=top="1px";height=width="1px";visibility="hidden";}if(!dojo.isIE){this.setSrc(_150,turi,true);_150.onload=new Function(_14f);}return _150;},setSrc:function(_152,src,_153){try{if(!_153){if(dojo.isWebKit){_152.location=src;}else{frames[_152.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit>521){idoc=_152.contentWindow.document;}else{if(dojo.isSafari){idoc=_152.document;}else{idoc=_152.contentWindow;}}if(!idoc){_152.location=src;return;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_154){var doc=_154.contentDocument||(((_154.name)&&(_154.document)&&(document.getElementsByTagName("iframe")[_154.name].contentWindow)&&(document.getElementsByTagName("iframe")[_154.name].contentWindow.document)))||((_154.name)&&(document.frames[_154.name])&&(document.frames[_154.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _155=null;try{var _156=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _157=_156.handleAs;_155=ifd;if(_157!="html"){if(_157=="xml"){if(dojo.isIE){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _158=(dii._frame.contentWindow.document).documentElement.innerText;_158=_158.replace(/>\s+</g,"><");_158=dojo.trim(_158);var _159={responseText:_158};_155=dojo._contentHandlers["xml"](_159);}}else{_155=ifd.getElementsByTagName("textarea")[0].value;if(_157=="json"){_155=dojo.fromJson(_155);}else{if(_157=="javascript"){_155=dojo.eval(_155);}}}}}catch(e){_155=e;}finally{_156._callNext();}return _155;},function(_15a,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _15a;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}var dfd=this._currentDfd=this._dfdQueue.shift();var _15b=dfd.ioArgs;var args=_15b.args;_15b._contentToClean=[];var fn=dojo.byId(args["form"]);var _15c=args["content"]||{};if(fn){if(_15c){var _15d=function(name,_15e){var tn;if(dojo.isIE){tn=dojo.doc.createElement("<input type='hidden' name='"+name+"'>");}else{tn=dojo.doc.createElement("input");tn.type="hidden";tn.name=name;}tn.value=_15e;fn.appendChild(tn);_15b._contentToClean.push(name);};for(var x in _15c){var val=_15c[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_15d(x,val[i]);}}else{if(!fn[x]){_15d(x,val);}else{fn[x].value=val;}}}}var _15f=fn.getAttributeNode("action");var _160=fn.getAttributeNode("method");var _161=fn.getAttributeNode("target");if(args["url"]){_15b._originalAction=_15f?_15f.value:null;if(_15f){_15f.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_160||!_160.value){if(_160){_160.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_15b._originalTarget=_161?_161.value:null;if(_161){_161.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _162=args.url+(args.url.indexOf("?")>-1?"&":"?")+_15b.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_162,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _163=dfd.ioArgs;var args=_163.args;var _164=dojo.byId(args.form);if(_164){var _165=_163._contentToClean;for(var i=0;i<_165.length;i++){var key=_165[i];for(var j=0;j<_164.childNodes.length;j++){var _166=_164.childNodes[j];if(_166.name==key){dojo.destroy(_166);break;}}}if(_163["_originalAction"]){_164.setAttribute("action",_163._originalAction);}if(_163["_originalTarget"]){_164.setAttribute("target",_163._originalTarget);_164.target=_163._originalTarget;}}_163._finished=true;}};}if(!dojo._hasResource["dojox.io.scriptFrame"]){dojo._hasResource["dojox.io.scriptFrame"]=true;dojo.provide("dojox.io.scriptFrame");(function(){var _167=dojo.io.script;dojox.io.scriptFrame={_waiters:{},_loadedIds:{},_getWaiters:function(_168){return this._waiters[_168]||(this._waiters[_168]=[]);},_fixAttachUrl:function(url){},_loaded:function(_169){var _16a=this._getWaiters(_169);this._loadedIds[_169]=true;this._waiters[_169]=null;for(var i=0;i<_16a.length;i++){var _16b=_16a[i];_16b.frameDoc=dojo.io.iframe.doc(dojo.byId(_169));_167.attach(_16b.id,_16b.url,_16b.frameDoc);}}};var _16c=_167._canAttach;var _16d=dojox.io.scriptFrame;_167._canAttach=function(_16e){var fId=_16e.args.frameDoc;if(fId&&dojo.isString(fId)){var _16f=dojo.byId(fId);var _170=_16d._getWaiters(fId);if(!_16f){_170.push(_16e);dojo.io.iframe.create(fId,dojox._scopeName+".io.scriptFrame._loaded('"+fId+"');");}else{if(_16d._loadedIds[fId]){_16e.frameDoc=dojo.io.iframe.doc(_16f);this.attach(_16e.id,_16e.url,_16e.frameDoc);}else{_170.push(_16e);}}return false;}else{return _16c.apply(this,arguments);}};})();}if(!dojo._hasResource["dojox.io.xhrScriptPlugin"]){dojo._hasResource["dojox.io.xhrScriptPlugin"]=true;dojo.provide("dojox.io.xhrScriptPlugin");dojox.io.xhrScriptPlugin=function(url,_171,_172){dojox.io.xhrPlugins.register("script",function(_173,args){return args.sync!==true&&(_173=="GET"||_172)&&(args.url.substring(0,url.length)==url);},function(_174,args,_175){var send=function(){args.callbackParamName=_171;if(dojo.body()){args.frameDoc="frame"+Math.random();}return dojo.io.script.get(args);};return (_172?_172(send,true):send)(_174,args,_175);});};}if(!dojo._hasResource["dojox.data.PersevereStore"]){dojo._hasResource["dojox.data.PersevereStore"]=true;dojo.provide("dojox.data.PersevereStore");dojox.json.ref.serializeFunctions=true;dojo.declare("dojox.data.PersevereStore",dojox.data.JsonQueryRestStore,{useFullIdInQueries:true,jsonQueryPagination:false});dojox.data.PersevereStore.getStores=function(path,sync){path=(path&&(path.match(/\/$/)?path:(path+"/")))||"/";if(path.match(/^\w*:\/\//)){dojox.io.xhrScriptPlugin(path,"callback",dojox.io.xhrPlugins.fullHttpAdapter);}var _176=dojo.xhr;dojo.xhr=function(_177,args){(args.headers=args.headers||{})["Server-Methods"]=false;return _176.apply(dojo,arguments);};var _178=dojox.rpc.Rest(path,true);dojox.rpc._sync=sync;var dfd=_178("Class/");var _179;var _17a={};var _17b=0;dfd.addCallback(function(_17c){dojox.json.ref.resolveJson(_17c,{index:dojox.rpc.Rest._index,idPrefix:"/Class/",assignAbsoluteIds:true});function _17d(_17e){if(_17e["extends"]&&_17e["extends"].prototype){if(!_17e.prototype||!_17e.prototype.isPrototypeOf(_17e["extends"].prototype)){_17d(_17e["extends"]);dojox.rpc.Rest._index[_17e.prototype.__id]=_17e.prototype=dojo.mixin(dojo.delegate(_17e["extends"].prototype),_17e.prototype);}}};function _17f(_180,_181){if(_180&&_181){for(var j in _180){var _182=_180[j];if(_182.runAt!="client"&&!_181[j]){_181[j]=(function(_183){return function(){var _184=dojo.rawXhrPost({url:this.__id,postData:dojo.toJson({method:_183,id:_17b++,params:dojo._toArray(arguments)}),handleAs:"json"});_184.addCallback(function(_185){return _185.error?new Error(_185.error):_185.result;});return _184;};})(j);}}}};for(var i in _17c){if(typeof _17c[i]=="object"){var _186=_17c[i];_17d(_186);_17f(_186.methods,_186.prototype=_186.prototype||{});_17f(_186.staticMethods,_186);_17a[_17c[i].id]=new dojox.data.PersevereStore({target:new dojo._Url(path,_17c[i].id)+"/",schema:_186});}}return (_179=_17a);});dojo.xhr=_176;return sync?_179:dfd;};dojox.data.PersevereStore.addProxy=function(){dojox.io.xhrPlugins.addProxy("/proxy/");};}
