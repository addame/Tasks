/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.json.query"]){dojo._hasResource["dojox.json.query"]=true;dojo.provide("dojox.json.query");(function(){function _1(_2,_3,_4,_5){var _6=_2.length,_7=[];_4=_4||_6;_3=(_3<0)?Math.max(0,_3+_6):Math.min(_6,_3);_4=(_4<0)?Math.max(0,_4+_6):Math.min(_6,_4);for(var i=_3;i<_4;i+=_5){_7.push(_2[i]);}return _7;};function _8(_9,_a){var _b=[];function _c(_d){if(_a){if(_a===true&&!(_d instanceof Array)){_b.push(_d);}else{if(_d[_a]){_b.push(_d[_a]);}}}for(var i in _d){var _e=_d[i];if(!_a){_b.push(_e);}else{if(_e&&typeof _e=="object"){_c(_e);}}}};if(_a instanceof Array){if(_a.length==1){return _9[_a[0]];}for(var i=0;i<_a.length;i++){_b.push(_9[_a[i]]);}}else{_c(_9);}return _b;};function _f(_10,_11){var _12=[];var _13={};for(var i=0,l=_10.length;i<l;++i){var _14=_10[i];if(_11(_14,i,_10)){if((typeof _14=="object")&&_14){if(!_14.__included){_14.__included=true;_12.push(_14);}}else{if(!_13[_14+typeof _14]){_13[_14+typeof _14]=true;_12.push(_14);}}}}for(i=0,l=_12.length;i<l;++i){if(_12[i]){delete _12[i].__included;}}return _12;};dojox.json.query=function(_15,obj){var _16=0;var str=[];_15=_15.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(t){_16+=t=="["?1:t=="]"?-1:0;return (t=="]"&&_16>0)?"`]":(t.charAt(0)=="\""||t.charAt(0)=="'")?"`"+(str.push(t)-1):t;});var _17="";function _18(_19){_17=_19+"("+_17;};function _1a(t,a,b,c,d,e,f,g){return str[g].match(/[\*\?]/)||f=="~"?"/^"+str[g].substring(1,str[g].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+(f=="~"?"$/i":"$/")+".test("+a+")":t;};_15.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw new Error("Unsafe function call");});_15=_15.replace(/([^=]=)([^=])/g,"$1=$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(t){return t.charAt(0)=="."?t:t=="@"?"$obj":(t.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+t;}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(t,a,b){var _1b=t.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/);if(_1b){var _1c="";if(t.match(/^\./)){_18("expand");_1c=",true)";}_18(_1b[1].match(/\=/)?"dojo.map":_1b[1].match(/\^/)?"distinctFilter":"dojo.filter");return _1c+",function($obj){return "+_1b[2]+"})";}_1b=t.match(/^\[\s*([\/\\].*)\]/);if(_1b){return ".concat().sort(function(a,b){"+_1b[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(t,a,b){return "var av= "+b.replace(/\$obj/,"a")+",bv= "+b.replace(/\$obj/,"b")+";if(av>bv||bv==null){return "+(a=="/"?1:-1)+";}\n"+"if(bv>av||av==null){return "+(a=="/"?-1:1)+";}\n";})+"return 0;})";}_1b=t.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/);if(_1b){_18("slice");return ","+(_1b[1]||0)+","+(_1b[2]||0)+","+(_1b[3]||1)+")";}if(t.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)){_18("expand");return (t.charAt(1)=="."?",'"+b+"'":t.match(/,/)?","+t:"")+")";}return t;}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,_1a).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(t,a,b,c,d,e,f,g){return _1a(t,c,d,e,f,g,b,a);});_15=_17+(_15.charAt(0)=="$"?"":"$")+_15.replace(/`([0-9]+|\])/g,function(t,a){return a=="]"?"]":str[a];});var _1d=eval("1&&function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj=$;return "+_15+"}");for(var i=0;i<arguments.length-1;i++){arguments[i]=arguments[i+1];}return obj?_1d.apply(this,arguments):_1d;};})();}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(_1e,_1f){var rxp="^";var c=null;for(var i=0;i<_1e.length;i++){c=_1e.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_1e.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_1f){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dojox.data.ClientFilter"]){dojo._hasResource["dojox.data.ClientFilter"]=true;dojo.provide("dojox.data.ClientFilter");(function(){var cf;var _20=function(_21,_22,_23){return function(_24){_21._updates.push({create:_22&&_24,remove:_23&&_24});cf.onUpdate();};};cf=dojo.declare("dojox.data.ClientFilter",null,{cacheByDefault:false,constructor:function(){this.onSet=_20(this,true,true);this.onNew=_20(this,true,false);this.onDelete=_20(this,false,true);this._updates=[];this._fetchCache=[];},clearCache:function(){this._fetchCache=[];},updateResultSet:function(_25,_26){if(this.isUpdateable(_26)){for(var i=_26._version||0;i<this._updates.length;i++){var _27=this._updates[i].create;var _28=this._updates[i].remove;if(_28){for(var j=0;j<_25.length;j++){if(_25[j]==_28){_25.splice(j--,1);var _29=true;}}}if(_27&&this.matchesQuery(_27,_26)&&dojo.indexOf(_25,_27)==-1){_25.push(_27);_29=true;}}if(_26.sort&&_29){_25.sort(this.makeComparator(_26.sort.concat()));}_25._fullLength=_25.length;if(_26.count&&_29){_25.splice(_26.count,_25.length);}_26._version=this._updates.length;return _29?2:1;}return 0;},querySuperSet:function(_2a,_2b){if(_2a.query==_2b.query){return {};}if(!(_2b.query instanceof Object&&(!_2a.query||typeof _2a.query=="object"))){return false;}var _2c=dojo.mixin({},_2b.query);for(var i in _2a.query){if(_2c[i]==_2a.query[i]){delete _2c[i];}else{if(!(typeof _2a.query[i]=="string"&&dojo.data.util.filter.patternToRegExp(_2a.query[i]).test(_2c[i]))){return false;}}}return _2c;},serverVersion:0,cachingFetch:function(_2d){var _2e=this;for(var i=0;i<this._fetchCache.length;i++){var _2f=this._fetchCache[i];var _30=this.querySuperSet(_2f,_2d);if(_30!==false){var _31=_2f._loading;if(!_31){_31=new dojo.Deferred();_31.callback(_2f.cacheResults);}_31.addCallback(function(_32){_32=_2e.clientSideFetch(dojo.mixin(dojo.mixin({},_2d),{query:_30}),_32);_31.fullLength=_32._fullLength;return _32;});_2d._version=_2f._version;break;}}if(!_31){var _33=dojo.mixin({},_2d);var _34=(_2d.queryOptions||0).cache;var _35=this._fetchCache;if(_34===undefined?this.cacheByDefault:_34){if(_2d.start||_2d.count){delete _33.start;delete _33.count;_2d.clientQuery=dojo.mixin(_2d.clientQuery||{},{start:_2d.start,count:_2d.count});}_2d=_33;_35.push(_2d);}_31=_2d._loading=this._doQuery(_2d);_31.addErrback(function(){_35.splice(dojo.indexOf(_35,_2d),1);});}var _36=this.serverVersion;_31.addCallback(function(_37){delete _2d._loading;if(_37){_2d._version=typeof _2d._version=="number"?_2d._version:_36;_2e.updateResultSet(_37,_2d);_2d.cacheResults=_37;if(!_2d.count||_37.length<_2d.count){_31.fullLength=_37.length;}}return _37;});return _31;},isUpdateable:function(_38){return typeof _38.query=="object";},clientSideFetch:function(_39,_3a){if(_39.queryOptions&&_39.queryOptions.results){_3a=_39.queryOptions.results;}if(_39.query){var _3b=[];for(var i=0;i<_3a.length;i++){var _3c=_3a[i];if(_3c&&this.matchesQuery(_3c,_39)){_3b.push(_3a[i]);}}}else{_3b=_39.sort?_3a.concat():_3a;}if(_39.sort){_3b.sort(this.makeComparator(_39.sort.concat()));}return this.clientSidePaging(_39,_3b);},clientSidePaging:function(_3d,_3e){var _3f=_3d.start||0;var _40=(_3f||_3d.count)?_3e.slice(_3f,_3f+(_3d.count||_3e.length)):_3e;_40._fullLength=_3e.length;return _40;},matchesQuery:function(_41,_42){var _43=_42.query;var _44=_42.queryOptions&&_42.queryOptions.ignoreCase;for(var i in _43){var _45=_43[i];var _46=this.getValue(_41,i);if((typeof _45=="string"&&(_45.match(/[\*\.]/)||_44))?!dojo.data.util.filter.patternToRegExp(_45,_44).test(_46):_46!=_45){return false;}}return true;},makeComparator:function(_47){var _48=_47.shift();if(!_48){return function(){return 0;};}var _49=_48.attribute;var _4a=!!_48.descending;var _4b=this.makeComparator(_47);var _4c=this;return function(a,b){var av=_4c.getValue(a,_49);var bv=_4c.getValue(b,_49);if(av!=bv){return av<bv==_4a?1:-1;}return _4b(a,b);};}});cf.onUpdate=function(){};})();}if(!dojo._hasResource["dojox.rpc.Rest"]){dojo._hasResource["dojox.rpc.Rest"]=true;dojo.provide("dojox.rpc.Rest");(function(){if(dojox.rpc&&dojox.rpc.transportRegistry){dojox.rpc.transportRegistry.register("REST",function(str){return str=="REST";},{getExecutor:function(_4d,_4e,svc){return new dojox.rpc.Rest(_4e.name,(_4e.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,_4f){var _50=svc._getRequest(_4e,[id]);_50.url=_50.target+(_50.data?"?"+_50.data:"");return _50;});}});}var drr;function _51(_52,_53,_54,id){_52.addCallback(function(_55){if(_54){_54=_52.ioArgs.xhr&&_52.ioArgs.xhr.getResponseHeader("Content-Range");_52.fullLength=_54&&(_54=_54.match(/\/(.*)/))&&parseInt(_54[1]);}return _55;});return _52;};drr=dojox.rpc.Rest=function(_56,_57,_58,_59){var _5a;_5a=function(id,_5b){return drr._get(_5a,id,_5b);};_5a.isJson=_57;_5a._schema=_58;_5a.cache={serialize:_57?((dojox.json&&dojox.json.ref)||dojo).toJson:function(_5c){return _5c;}};_5a._getRequest=_59||function(id,_5d){if(dojo.isObject(id)){var _5e=_5d.sort&&_5d.sort[0];if(_5e&&_5e.attribute){id.sort=(_5e.descending?"-":"")+_5e.attribute;}id=dojo.objectToQuery(id);id=id?"?"+id:"";}var _5f={url:_56+(id==null?"":id),handleAs:_57?"json":"text",contentType:_57?"application/json":"text/plain",sync:dojox.rpc._sync,headers:{Accept:_57?"application/json,application/javascript":"*/*"}};if(_5d&&(_5d.start>=0||_5d.count>=0)){_5f.headers.Range="items="+(_5d.start||"0")+"-"+((_5d.count&&_5d.count!=Infinity&&(_5d.count+(_5d.start||0)-1))||"");}dojox.rpc._sync=false;return _5f;};function _60(_61){_5a[_61]=function(id,_62){return drr._change(_61,_5a,id,_62);};};_60("put");_60("post");_60("delete");_5a.servicePath=_56;return _5a;};drr._index={};drr._timeStamps={};drr._change=function(_63,_64,id,_65){var _66=_64._getRequest(id);_66[_63+"Data"]=_65;return _51(dojo.xhr(_63.toUpperCase(),_66,true),_64);};drr._get=function(_67,id,_68){_68=_68||{};return _51(dojo.xhrGet(_67._getRequest(id,_68)),_67,(_68.start>=0||_68.count>=0),id);};})();}if(!dojo._hasResource["dojox.storage.Provider"]){dojo._hasResource["dojox.storage.Provider"]=true;dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){console.warn("dojox.storage.initialize not implemented");},isAvailable:function(){console.warn("dojox.storage.isAvailable not implemented");},put:function(key,_69,_6a,_6b){console.warn("dojox.storage.put not implemented");},get:function(key,_6c){console.warn("dojox.storage.get not implemented");},hasKey:function(key,_6d){return !!this.get(key,_6d);},getKeys:function(_6e){console.warn("dojox.storage.getKeys not implemented");},clear:function(_6f){console.warn("dojox.storage.clear not implemented");},remove:function(key,_70){console.warn("dojox.storage.remove not implemented");},getNamespaces:function(){console.warn("dojox.storage.getNamespaces not implemented");},isPermanent:function(){console.warn("dojox.storage.isPermanent not implemented");},getMaximumSize:function(){console.warn("dojox.storage.getMaximumSize not implemented");},putMultiple:function(_71,_72,_73,_74){for(var i=0;i<_71.length;i++){dojox.storage.put(_71[i],_72[i],_73,_74);}},getMultiple:function(_75,_76){var _77=[];for(var i=0;i<_75.length;i++){_77.push(dojox.storage.get(_75[i],_76));}return _77;},removeMultiple:function(_78,_79){for(var i=0;i<_78.length;i++){dojox.storage.remove(_78[i],_79);}},isValidKeyArray:function(_7a){if(_7a===null||_7a===undefined||!dojo.isArray(_7a)){return false;}return !dojo.some(_7a,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){console.warn("dojox.storage.showSettingsUI not implemented");},hideSettingsUI:function(){console.warn("dojox.storage.hideSettingsUI not implemented");},isValidKey:function(_7b){if(_7b===null||_7b===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_7b);},getResourceList:function(){return [];}});}if(!dojo._hasResource["dojox.storage.manager"]){dojo._hasResource["dojox.storage.manager"]=true;dojo.provide("dojox.storage.manager");dojox.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(_7c,_7d){this.providers.push(_7d);this.providers[_7c]=_7d;};this.setProvider=function(_7e){};this.autodetect=function(){if(this._initialized){return;}var _7f=dojo.config["forceStorageProvider"]||false;var _80;for(var i=0;i<this.providers.length;i++){_80=this.providers[i];if(_7f&&_7f==_80.declaredClass){_80.isAvailable();break;}else{if(!_7f&&_80.isAvailable()){break;}}}if(!_80){this._initialized=true;this.available=false;this.currentProvider=null;console.warn("No storage provider found for this platform");this.loaded();return;}this.currentProvider=_80;dojo.mixin(dojox.storage,this.currentProvider);dojox.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(_81){this._onLoadListeners.push(_81);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(_82){for(var i=0;i<this._onLoadListeners.length;i++){if(_82==this._onLoadListeners[i]){this._onLoadListeners=this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&dojox.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_83){try{var _84=eval("new "+_83+"()");var _85=_84.isAvailable();if(!_85){return false;}return _85;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){console.debug(e);}});};this.getResourceList=function(){var _86=[];dojo.forEach(dojox.storage.manager.providers,function(_87){_86=_86.concat(_87.getResourceList());});return _86;};};}if(!dojo._hasResource["dojo.gears"]){dojo._hasResource["dojo.gears"]=true;dojo.provide("dojo.gears");dojo.gears._gearsObject=function(){var _88;var _89;var _8a=dojo.getObject("google.gears");if(_8a){return _8a;}if(typeof GearsFactory!="undefined"){_88=new GearsFactory();}else{if(dojo.isIE){try{_88=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_88=document.createElement("object");_88.setAttribute("type","application/x-googlegears");_88.setAttribute("width",0);_88.setAttribute("height",0);_88.style.display="none";document.documentElement.appendChild(_88);}}}if(!_88){return null;}dojo.setObject("google.gears.factory",_88);return dojo.getObject("google.gears");};dojo.gears.available=(!!dojo.gears._gearsObject())||0;}if(!dojo._hasResource["dojox.sql._crypto"]){dojo._hasResource["dojox.sql._crypto"]=true;dojo.provide("dojox.sql._crypto");dojo.mixin(dojox.sql._crypto,{_POOL_SIZE:100,encrypt:function(_8b,_8c,_8d){this._initWorkerPool();var msg={plaintext:_8b,password:_8c};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_8d);},decrypt:function(_8e,_8f,_90){this._initWorkerPool();var msg={ciphertext:_8e,password:_8f};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_90);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var _91=this;this._manager.onmessage=function(msg,_92){var _93=_91._employed["_"+_92];_91._employed["_"+_92]=undefined;_91._unemployed.push("_"+_92);if(_91._handleMessage.length){var _94=_91._handleMessage.shift();_91._assignWork(_94.msg,_94.callback);}_93(msg);};var _95="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var _96=_95+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(_96));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_97){if(!this._handleMessage.length&&this._unemployed.length){var _98=this._unemployed.shift().substring(1);this._employed["_"+_98]=_97;this._manager.sendMessage(msg,parseInt(_98,10));}else{this._handleMessage={msg:msg,callback:_97};}},_workerHandler:function(msg,_99){var _9a=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var _9b=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _9c(_9d,w){var Nb=4;var Nr=w.length/Nb-1;var _9e=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_9e[i%4][Math.floor(i/4)]=_9d[i];}_9e=_9f(_9e,w,0,Nb);for(var _a0=1;_a0<Nr;_a0++){_9e=_a1(_9e,Nb);_9e=_a2(_9e,Nb);_9e=_a3(_9e,Nb);_9e=_9f(_9e,w,_a0,Nb);}_9e=_a1(_9e,Nb);_9e=_a2(_9e,Nb);_9e=_9f(_9e,w,Nr,Nb);var _a4=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_a4[i]=_9e[i%4][Math.floor(i/4)];}return _a4;};function _a1(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=_9a[s[r][c]];}}return s;};function _a2(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _a3(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _9f(_a5,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_a5[r][c]^=w[rnd*4+c][r];}}return _a5;};function _a6(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var _a7=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){_a7[t]=w[i-1][t];}if(i%Nk==0){_a7=_a8(_a9(_a7));for(var t=0;t<4;t++){_a7[t]^=_9b[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){_a7=_a8(_a7);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^_a7[t];}}return w;};function _a8(w){for(var i=0;i<4;i++){w[i]=_9a[w[i]];}return w;};function _a9(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _aa(_ab,_ac,_ad){if(!(_ad==128||_ad==192||_ad==256)){return "";}var _ae=_ad/8;var _af=new Array(_ae);for(var i=0;i<_ae;i++){_af[i]=_ac.charCodeAt(i)&255;}var key=_9c(_af,_a6(_af));key=key.concat(key.slice(0,_ae-16));var _b0=16;var _b1=new Array(_b0);var _b2=(new Date()).getTime();for(var i=0;i<4;i++){_b1[i]=(_b2>>>i*8)&255;}for(var i=0;i<4;i++){_b1[i+4]=(_b2/4294967296>>>i*8)&255;}var _b3=_a6(key);var _b4=Math.ceil(_ab.length/_b0);var _b5=new Array(_b4);for(var b=0;b<_b4;b++){for(var c=0;c<4;c++){_b1[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_b1[15-c-4]=(b/4294967296>>>c*8);}var _b6=_9c(_b1,_b3);var _b7=b<_b4-1?_b0:(_ab.length-1)%_b0+1;var ct="";for(var i=0;i<_b7;i++){var _b8=_ab.charCodeAt(b*_b0+i);var _b9=_b8^_b6[i];ct+=String.fromCharCode(_b9);}_b5[b]=_ba(ct);}var _bb="";for(var i=0;i<8;i++){_bb+=String.fromCharCode(_b1[i]);}_bb=_ba(_bb);return _bb+"-"+_b5.join("-");};function _bc(_bd,_be,_bf){if(!(_bf==128||_bf==192||_bf==256)){return "";}var _c0=_bf/8;var _c1=new Array(_c0);for(var i=0;i<_c0;i++){_c1[i]=_be.charCodeAt(i)&255;}var _c2=_a6(_c1);var key=_9c(_c1,_c2);key=key.concat(key.slice(0,_c0-16));var _c3=_a6(key);_bd=_bd.split("-");var _c4=16;var _c5=new Array(_c4);var _c6=_c7(_bd[0]);for(var i=0;i<8;i++){_c5[i]=_c6.charCodeAt(i);}var _c8=new Array(_bd.length-1);for(var b=1;b<_bd.length;b++){for(var c=0;c<4;c++){_c5[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_c5[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _c9=_9c(_c5,_c3);_bd[b]=_c7(_bd[b]);var pt="";for(var i=0;i<_bd[b].length;i++){var _ca=_bd[b].charCodeAt(i);var _cb=_ca^_c9[i];pt+=String.fromCharCode(_cb);}_c8[b-1]=pt;}return _c8.join("");};function _ba(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _c7(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _cc(_cd,_ce){return _aa(_cd,_ce,256);};function _cf(_d0,_d1){return _bc(_d0,_d1,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _d2=arg.plaintext;var _d3=arg.password;var _d4=_cc(_d2,_d3);gearsWorkerPool.sendMessage(String(_d4),_99);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _d5=arg.ciphertext;var _d3=arg.password;var _d4=_cf(_d5,_d3);gearsWorkerPool.sendMessage(String(_d4),_99);}}}});}if(!dojo._hasResource["dojox.sql._base"]){dojo._hasResource["dojox.sql._base"]=true;dojo.provide("dojox.sql._base");dojo.mixin(dojox.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?dojox.sql.debug:false),open:function(_d6){if(this._dbOpen&&(!_d6||_d6==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_d6){_d6=this.dbName;}try{this._initDb();this.db.open(_d6);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_d7){if(dojo.isIE){return;}if(!this._dbOpen&&(!_d7||_d7==this.dbName)){return;}if(!_d7){_d7=this.dbName;}try{this.db.close(_d7);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_d8){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _d9=null;var _da=null;var _db=dojo._toArray(_d8);sql=_db.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_d9=_db.splice(_db.length-1,1)[0];_da=_db.splice(_db.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,_db);}var _dc;if(this._needsEncrypt(sql)){_dc=new dojox.sql._SQLCrypto("encrypt",sql,_da,_db,_d9);return null;}else{if(this._needsDecrypt(sql)){_dc=new dojox.sql._SQLCrypto("decrypt",sql,_da,_db,_d9);return null;}}var rs=this.db.execute(sql,_db);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;console.debug("SQL Exception: "+exp);if(this._autoClose){try{this.close();}catch(e){console.debug("Error closing database: "+e.message||e);}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(dojox.off){dojox.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,_dd){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<_dd.length;i++){if(typeof _dd[i]=="string"){msg+=", \""+_dd[i]+"\"";}else{msg+=", "+_dd[i];}}msg+=")";console.debug(msg);},_normalizeResults:function(rs){var _de=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _df=rs.fieldName(i);var _e0=rs.field(i);row[_df]=_e0;}_de.push(row);rs.next();}rs.close();return _de;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_e1,sql,_e2,_e3,_e4){if(_e1=="encrypt"){this._execEncryptSQL(sql,_e2,_e3,_e4);}else{this._execDecryptSQL(sql,_e2,_e3,_e4);}},_execEncryptSQL:function(sql,_e5,_e6,_e7){var _e8=this._stripCryptoSQL(sql);var _e9=this._flagEncryptedArgs(sql,_e6);var _ea=this;this._encrypt(_e8,_e5,_e6,_e9,function(_eb){var _ec=false;var _ed=[];var exp=null;try{_ed=dojox.sql.db.execute(_e8,_eb);}catch(execError){_ec=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_e7(null,true,exp.toString());return;}_ed=dojox.sql._normalizeResults(_ed);if(dojox.sql._autoClose){dojox.sql.close();}if(dojox.sql._needsDecrypt(sql)){var _ee=_ea._determineDecryptedColumns(sql);_ea._decrypt(_ed,_ee,_e5,function(_ef){_e7(_ef,false,null);});}else{_e7(_ed,false,null);}});},_execDecryptSQL:function(sql,_f0,_f1,_f2){var _f3=this._stripCryptoSQL(sql);var _f4=this._determineDecryptedColumns(sql);var _f5=false;var _f6=[];var exp=null;try{_f6=dojox.sql.db.execute(_f3,_f1);}catch(execError){_f5=true;exp=execError.message||execError;}if(exp!=null){if(dojox.sql._autoClose){try{dojox.sql.close();}catch(e){}}_f2(_f6,true,exp.toString());return;}_f6=dojox.sql._normalizeResults(_f6);if(dojox.sql._autoClose){dojox.sql.close();}this._decrypt(_f6,_f4,_f0,function(_f7){_f2(_f7,false,null);});},_encrypt:function(sql,_f8,_f9,_fa,_fb){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=_f9;for(var i=0;i<_f9.length;i++){if(_fa[i]){var _fc=_f9[i];var _fd=i;this._totalCrypto++;dojox.sql._crypto.encrypt(_fc,_f8,dojo.hitch(this,function(_fe){this._finalArgs[_fd]=_fe;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_fb(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_ff,_100,_101,_102){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_ff;for(var i=0;i<_ff.length;i++){var row=_ff[i];for(var _103 in row){if(_100=="*"||_100[_103]){this._totalCrypto++;var _104=row[_103];this._decryptSingleColumn(_103,_104,_101,i,function(_105){_102(_105);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _106=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_106!=null){for(var i=0;i<_106.length;i++){var _107=_106[i];var _108=_107.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_107,_108);}}_106=sql.match(/DECRYPT\([^\)]*\)/ig);if(_106!=null){for(i=0;i<_106.length;i++){var _109=_106[i];var _10a=_109.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_109,_10a);}}return sql;},_flagEncryptedArgs:function(sql,args){var _10b=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _10c;var _10d=0;var _10e=[];while((_10c=_10b.exec(sql))!=null){var _10f=RegExp.lastMatch+"";if(/^[\"\']/.test(_10f)){continue;}var _110=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_110=true;}_10e[_10d]=_110;_10d++;}return _10e;},_determineDecryptedColumns:function(sql){var _111={};if(/DECRYPT\(\*\)/i.test(sql)){_111="*";}else{var _112=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _113=_112.exec(sql);while(_113){var _114=new String(RegExp.lastMatch);var _115=_114.replace(/DECRYPT\(/i,"");_115=_115.replace(/\)/,"");_115=_115.split(/\s*,\s*/);dojo.forEach(_115,function(_116){if(/\s*\w* AS (\w*)/i.test(_116)){_116=_116.match(/\s*\w* AS (\w*)/i)[1];}_111[_116]=true;});_113=_112.exec(sql);}}return _111;},_decryptSingleColumn:function(_117,_118,_119,_11a,_11b){dojox.sql._crypto.decrypt(_118,_119,dojo.hitch(this,function(_11c){this._finalResultSet[_11a][_117]=_11c;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_11b(this._finalResultSet);}}));}});(function(){var _11d=dojox.sql;dojox.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(dojox.sql,_11d);})();}if(!dojo._hasResource["dojox.sql"]){dojo._hasResource["dojox.sql"]=true;dojo.provide("dojox.sql");}if(!dojo._hasResource["dojox.storage.GearsStorageProvider"]){dojo._hasResource["dojox.storage.GearsStorageProvider"]=true;dojo.provide("dojox.storage.GearsStorageProvider");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",dojox.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_11e,_11f,_120){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_120=_120||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_120)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_11e)){_11e="string:"+_11e;}else{_11e=dojo.toJson(_11e);}try{dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_120,key);dojox.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_120,key,_11e);}catch(e){console.debug("dojox.storage.GearsStorageProvider.put:",e);_11f(this.FAILED,key,e.toString(),_120);return;}if(_11f){_11f(dojox.storage.SUCCESS,key,null,_120);}},get:function(key,_121){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_121=_121||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_121)){throw new Error("Invalid namespace given: "+key);}var _122=dojox.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_121,key);if(!_122.length){return null;}else{_122=_122[0].value;}if(dojo.isString(_122)&&(/^string:/.test(_122))){_122=_122.substring("string:".length);}else{_122=dojo.fromJson(_122);}return _122;},getNamespaces:function(){this._initStorage();var _123=[dojox.storage.DEFAULT_NAMESPACE];var rs=dojox.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=dojox.storage.DEFAULT_NAMESPACE){_123.push(rs[i].namespace);}}return _123;},getKeys:function(_124){this._initStorage();_124=_124||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_124)){throw new Error("Invalid namespace given: "+_124);}var rs=dojox.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_124);var _125=[];for(var i=0;i<rs.length;i++){_125.push(rs[i].key);}return _125;},clear:function(_126){this._initStorage();_126=_126||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_126)){throw new Error("Invalid namespace given: "+_126);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_126);},remove:function(key,_127){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_127=_127||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_127)){throw new Error("Invalid namespace given: "+key);}dojox.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_127,key);},putMultiple:function(keys,_128,_129,_12a){this._initStorage();if(!this.isValidKeyArray(keys)||!_128 instanceof Array||keys.length!=_128.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_128+"]");}if(_12a==null||typeof _12a=="undefined"){_12a=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_12a)){throw new Error("Invalid namespace given: "+_12a);}this._statusHandler=_129;try{dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _12b="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _12c=_128[i];if(dojo.isString(_12c)){_12c="string:"+_12c;}else{_12c=dojo.toJson(_12c);}dojox.sql.db.execute(_12b,[_12a,keys[i],_12c]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();}catch(e){console.debug("dojox.storage.GearsStorageProvider.putMultiple:",e);if(_129){_129(this.FAILED,keys,e.toString(),_12a);}return;}if(_129){_129(dojox.storage.SUCCESS,keys,null,_12a);}},getMultiple:function(keys,_12d){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_12d==null||typeof _12d=="undefined"){_12d=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_12d)){throw new Error("Invalid namespace given: "+_12d);}var _12e="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _12f=[];for(var i=0;i<keys.length;i++){var _130=dojox.sql(_12e,_12d,keys[i]);if(!_130.length){_12f[i]=null;}else{_130=_130[0].value;if(dojo.isString(_130)&&(/^string:/.test(_130))){_12f[i]=_130.substring("string:".length);}else{_12f[i]=dojo.fromJson(_130);}}}return _12f;},removeMultiple:function(keys,_131){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_131==null||typeof _131=="undefined"){_131=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_131)){throw new Error("Invalid namespace given: "+_131);}dojox.sql.open();dojox.sql.db.execute("BEGIN TRANSACTION");var _132="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){dojox.sql.db.execute(_132,[_131,keys[i]]);}dojox.sql.db.execute("COMMIT TRANSACTION");dojox.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _133=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _134=google.gears.factory.getPermission(_133,icon,msg);if(!_134){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{dojox.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");dojox.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){console.debug("dojox.storage.GearsStorageProvider._createTables:",e);throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});dojox.storage.manager.register("dojox.storage.GearsStorageProvider",new dojox.storage.GearsStorageProvider());})();}}if(!dojo._hasResource["dojox.storage.WhatWGStorageProvider"]){dojo._hasResource["dojox.storage.WhatWGStorageProvider"]=true;dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.declare("dojox.storage.WhatWGStorageProvider",[dojox.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=this._getDomain();this.initialized=true;dojox.storage.manager.loaded();},isAvailable:function(){try{var _135=globalStorage[this._getDomain()];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_136,_137,_138){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_138=_138||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_138);this._statusHandler=_137;if(dojo.isString(_136)){_136="string:"+_136;}else{_136=dojo.toJson(_136);}var _139=dojo.hitch(this,function(evt){window.removeEventListener("storage",_139,false);if(_137){_137.call(null,this.SUCCESS,key,null,_138);}});window.addEventListener("storage",_139,false);try{var _13a=globalStorage[this._domain];_13a.setItem(key,_136);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_138);}},get:function(key,_13b){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_13b=_13b||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_13b);var _13c=globalStorage[this._domain];var _13d=_13c.getItem(key);if(_13d==null||_13d==""){return null;}_13d=_13d.value;if(dojo.isString(_13d)&&(/^string:/.test(_13d))){_13d=_13d.substring("string:".length);}else{_13d=dojo.fromJson(_13d);}return _13d;},getNamespaces:function(){var _13e=[this.DEFAULT_NAMESPACE];var _13f={};var _140=globalStorage[this._domain];var _141=/^__([^_]*)_/;for(var i=0;i<_140.length;i++){var _142=_140.key(i);if(_141.test(_142)==true){var _143=_142.match(_141)[1];if(typeof _13f[_143]=="undefined"){_13f[_143]=true;_13e.push(_143);}}}return _13e;},getKeys:function(_144){_144=_144||this.DEFAULT_NAMESPACE;if(this.isValidKey(_144)==false){throw new Error("Invalid namespace given: "+_144);}var _145;if(_144==this.DEFAULT_NAMESPACE){_145=new RegExp("^([^_]{2}.*)$");}else{_145=new RegExp("^__"+_144+"_(.*)$");}var _146=globalStorage[this._domain];var _147=[];for(var i=0;i<_146.length;i++){var _148=_146.key(i);if(_145.test(_148)==true){_148=_148.match(_145)[1];_147.push(_148);}}return _147;},clear:function(_149){_149=_149||this.DEFAULT_NAMESPACE;if(this.isValidKey(_149)==false){throw new Error("Invalid namespace given: "+_149);}var _14a;if(_149==this.DEFAULT_NAMESPACE){_14a=new RegExp("^[^_]{2}");}else{_14a=new RegExp("^__"+_149+"_");}var _14b=globalStorage[this._domain];var keys=[];for(var i=0;i<_14b.length;i++){if(_14a.test(_14b.key(i))==true){keys[keys.length]=_14b.key(i);}}dojo.forEach(keys,dojo.hitch(_14b,"removeItem"));},remove:function(key,_14c){key=this.getFullKey(key,_14c);var _14d=globalStorage[this._domain];_14d.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_14e){_14e=_14e||this.DEFAULT_NAMESPACE;if(this.isValidKey(_14e)==false){throw new Error("Invalid namespace given: "+_14e);}if(_14e==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_14e+"_"+key;}},_getDomain:function(){return ((location.hostname=="localhost"&&dojo.isFF&&dojo.isFF<3)?"localhost.localdomain":location.hostname);}});dojox.storage.manager.register("dojox.storage.WhatWGStorageProvider",new dojox.storage.WhatWGStorageProvider());}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_14f){this.pairs=[];this.returnWrappers=_14f||false;};dojo.extend(dojo.AdapterRegistry,{register:function(name,_150,wrap,_151,_152){this.pairs[((_152)?"unshift":"push")]([name,_150,wrap,_151]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var _153=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _154=dojo._docScroll();return {w:_153.clientWidth,h:_153.clientHeight,l:_154.x,t:_154.y};};dijit.placeOnScreen=function(node,pos,_155,_156){var _157=dojo.map(_155,function(_158){var c={corner:_158,pos:{x:pos.x,y:pos.y}};if(_156){c.pos.x+=_158.charAt(1)=="L"?_156.x:-_156.x;c.pos.y+=_158.charAt(0)=="T"?_156.y:-_156.y;}return c;});return dijit._place(node,_157);};dijit._place=function(node,_159,_15a){var view=dijit.getViewport();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}var best=null;dojo.some(_159,function(_15b){var _15c=_15b.corner;var pos=_15b.pos;if(_15a){_15a(node,_15b.aroundCorner,_15c);}var _15d=node.style;var _15e=_15d.display;var _15f=_15d.visibility;_15d.visibility="hidden";_15d.display="";var mb=dojo.marginBox(node);_15d.display=_15e;_15d.visibility=_15f;var _160=(_15c.charAt(1)=="L"?pos.x:Math.max(view.l,pos.x-mb.w)),_161=(_15c.charAt(0)=="T"?pos.y:Math.max(view.t,pos.y-mb.h)),endX=(_15c.charAt(1)=="L"?Math.min(view.l+view.w,_160+mb.w):pos.x),endY=(_15c.charAt(0)=="T"?Math.min(view.t+view.h,_161+mb.h):pos.y),_162=endX-_160,_163=endY-_161,_164=(mb.w-_162)+(mb.h-_163);if(best==null||_164<best.overflow){best={corner:_15c,aroundCorner:_15b.aroundCorner,x:_160,y:_161,w:_162,h:_163,overflow:_164};}return !_164;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&_15a){_15a(node,best.aroundCorner,best.corner);}return best;};dijit.placeOnScreenAroundNode=function(node,_165,_166,_167){_165=dojo.byId(_165);var _168=_165.style.display;_165.style.display="";var _169=_165.offsetWidth;var _16a=_165.offsetHeight;var _16b=dojo.coords(_165,true);_165.style.display=_168;return dijit._placeOnScreenAroundRect(node,_16b.x,_16b.y,_169,_16a,_166,_167);};dijit.placeOnScreenAroundRectangle=function(node,_16c,_16d,_16e){return dijit._placeOnScreenAroundRect(node,_16c.x,_16c.y,_16c.width,_16c.height,_16d,_16e);};dijit._placeOnScreenAroundRect=function(node,x,y,_16f,_170,_171,_172){var _173=[];for(var _174 in _171){_173.push({aroundCorner:_174,corner:_171[_174],pos:{x:x+(_174.charAt(1)=="L"?0:_16f),y:y+(_174.charAt(0)=="T"?0:_170)}});}return dijit._place(node,_173,_172);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,_175,_176,_177){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};}if(!dojo._hasResource["dojox.flash._base"]){dojo._hasResource["dojox.flash._base"]=true;dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojox.flash=function(){};dojox.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_178){this.url=url;this._visible=true;if(_178!==null&&_178!==undefined){this._visible=_178;}this._initialize();},addLoadedListener:function(_179){this._loadedListeners.push(_179);},addInstallingListener:function(_17a){this._installingListeners.push(_17a);},loaded:function(){dojox.flash.ready=true;if(dojox.flash._loadedListeners.length){for(var i=0;i<dojox.flash._loadedListeners.length;i++){dojox.flash._loadedListeners[i].call(null);}}},installing:function(){if(dojox.flash._installingListeners.length){for(var i=0;i<dojox.flash._installingListeners.length;i++){dojox.flash._installingListeners[i].call(null);}}},_initialize:function(){var _17b=new dojox.flash.Install();dojox.flash.installer=_17b;if(_17b.needed()){_17b.install();}else{dojox.flash.obj=new dojox.flash.Embed(this._visible);dojox.flash.obj.write();dojox.flash.comm=new dojox.flash.Communicator();}}};dojox.flash.Info=function(){this._detectVersion();};dojox.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_17c,_17d,_17e){_17e=parseFloat("."+_17e);if(this.versionMajor>=_17c&&this.versionMinor>=_17d&&this.versionRevision>=_17e){return true;}else{return false;}},_detectVersion:function(){var _17f;for(var _180=25;_180>0;_180--){if(dojo.isIE){var axo;try{if(_180>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_180);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_180==6){axo.AllowScriptAccess="always";}_17f=axo.GetVariable("$version");}}catch(e){continue;}}else{_17f=this._JSFlashInfo(_180);}if(_17f==-1){this.capable=false;return;}else{if(_17f!=0){var _181;if(dojo.isIE){var _182=_17f.split(" ");var _183=_182[1];_181=_183.split(",");}else{_181=_17f.split(".");}this.versionMajor=_181[0];this.versionMinor=_181[1];this.versionRevision=_181[2];var _184=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_184);this.capable=true;break;}}}},_JSFlashInfo:function(_185){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _186=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _187=navigator.plugins["Shockwave Flash"+_186].description;var _188=_187.split(" ");var _189=_188[2].split(".");var _18a=_189[0];var _18b=_189[1];var _18c=(_188[3]||_188[4]).split("r");var _18d=_18c[1]>0?_18c[1]:0;var _18e=_18a+"."+_18b+"."+_18d;return _18e;}}return -1;}};dojox.flash.Embed=function(_18f){this._visible=_18f;};dojox.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_190){var _191;var _192=dojox.flash.url;var _193=_192;var _194=_192;var _195=dojo.baseUrl;var _196=document.location.protocol+"//"+document.location.host;if(_190){var _197=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _198=escape(document.title);_193+="?MMredirectURL="+_197+"&MMplayerType=ActiveX"+"&MMdoctitle="+_198+"&baseUrl="+escape(_195)+"&xdomain="+escape(_196);_194+="?MMredirectURL="+_197+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_195)+"&xdomain="+escape(_196);}else{_193+="?cachebust="+new Date().getTime();_193+="&baseUrl="+escape(_195);_193+="&xdomain="+escape(_196);}if(_194.indexOf("?")==-1){_194+="?baseUrl="+escape(_195);}else{_194+="&baseUrl="+escape(_195);}_194+="&xdomain="+escape(_196);_191="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_193+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_194+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _199=this.id+"Container";if(dojo.byId(_199)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_191;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_19a){var _19b=dojo.byId(this.id+"Container");if(_19a){_19b.style.position="absolute";_19b.style.visibility="visible";}else{_19b.style.position="absolute";_19b.style.y="-1000px";_19b.style.visibility="hidden";}},center:function(){var _19c=this.width;var _19d=this.height;var _19e=dijit.getViewport();var x=_19e.l+(_19e.w-_19c)/2;var y=_19e.t+(_19e.h-_19d)/2;var _19f=dojo.byId(this.id+"Container");_19f.style.top=y+"px";_19f.style.left=x+"px";}};dojox.flash.Communicator=function(){};dojox.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_1a0){var _1a1=dojo.hitch(this,function(){var _1a2=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_1a2[i]=this._encodeData(arguments[i]);}var _1a3=this._execFlash(_1a0,_1a2);_1a3=this._decodeData(_1a3);return _1a3;});this[_1a0]=_1a1;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_1a4,_1a5){var _1a6=dojox.flash.obj.get();_1a5=(_1a5)?_1a5:[];for(var i=0;i<_1a5;i++){if(typeof _1a5[i]=="string"){_1a5[i]=this._encodeData(_1a5[i]);}}var _1a7=function(){return eval(_1a6.CallFunction("<invoke name=\""+_1a4+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_1a5,0)+"</invoke>"));};var _1a8=_1a7.call(_1a5);if(typeof _1a8=="string"){_1a8=this._decodeData(_1a8);}return _1a8;}};dojox.flash.Install=function(){};dojox.flash.Install.prototype={needed:function(){if(!dojox.flash.info.capable){return true;}if(!dojox.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _1a9;dojox.flash.info.installing=true;dojox.flash.installing();if(dojox.flash.info.capable==false){_1a9=new dojox.flash.Embed(false);_1a9.write();}else{if(dojox.flash.info.isVersionOrAbove(6,0,65)){_1a9=new dojox.flash.Embed(false);_1a9.write(true);_1a9.setVisible(true);_1a9.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){dojox.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=dojox.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};dojox.flash.info=new dojox.flash.Info();}if(!dojo._hasResource["dojox.flash"]){dojo._hasResource["dojox.flash"]=true;dojo.provide("dojox.flash");}if(!dojo._hasResource["dojox.storage.FlashStorageProvider"]){dojo._hasResource["dojox.storage.FlashStorageProvider"]=true;dojo.provide("dojox.storage.FlashStorageProvider");dojo.declare("dojox.storage.FlashStorageProvider",dojox.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}dojox.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _1aa=dojo.moduleUrl("dojox","storage/Storage.swf").toString();dojox.flash.setSwf(_1aa,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_1ab){if(_1ab===null||typeof _1ab==="undefined"||isNaN(_1ab)){throw new Error("Invalid argunment: "+_1ab);}dojox.flash.comm.setFlushDelay(String(_1ab));},getFlushDelay:function(){return Number(dojox.flash.comm.getFlushDelay());},flush:function(_1ac){if(_1ac==null||typeof _1ac=="undefined"){_1ac=dojox.storage.DEFAULT_NAMESPACE;}dojox.flash.comm.flush(_1ac);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_1ad,_1ae,_1af){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1af){_1af=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1af)){throw new Error("Invalid namespace given: "+_1af);}this._statusHandler=_1ae;if(dojo.isString(_1ad)){_1ad="string:"+_1ad;}else{_1ad=dojo.toJson(_1ad);}dojox.flash.comm.put(key,_1ad,_1af);},putMultiple:function(keys,_1b0,_1b1,_1b2){if(!this.isValidKeyArray(keys)||!_1b0 instanceof Array||keys.length!=_1b0.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_1b0+"]");}if(!_1b2){_1b2=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1b2)){throw new Error("Invalid namespace given: "+_1b2);}this._statusHandler=_1b1;var _1b3=keys.join(",");var _1b4=[];for(var i=0;i<_1b0.length;i++){if(dojo.isString(_1b0[i])){_1b0[i]="string:"+_1b0[i];}else{_1b0[i]=dojo.toJson(_1b0[i]);}_1b4[i]=_1b0[i].length;}var _1b5=_1b0.join("");var _1b6=_1b4.join(",");dojox.flash.comm.putMultiple(_1b3,_1b5,_1b6,_1b2);},get:function(key,_1b7){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_1b7){_1b7=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1b7)){throw new Error("Invalid namespace given: "+_1b7);}var _1b8=dojox.flash.comm.get(key,_1b7);if(_1b8==""){return null;}return this._destringify(_1b8);},getMultiple:function(keys,_1b9){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_1b9){_1b9=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1b9)){throw new Error("Invalid namespace given: "+_1b9);}var _1ba=keys.join(",");var _1bb=dojox.flash.comm.getMultiple(_1ba,_1b9);var _1bc=eval("("+_1bb+")");for(var i=0;i<_1bc.length;i++){_1bc[i]=(_1bc[i]=="")?null:this._destringify(_1bc[i]);}return _1bc;},_destringify:function(_1bd){if(dojo.isString(_1bd)&&(/^string:/.test(_1bd))){_1bd=_1bd.substring("string:".length);}else{_1bd=dojo.fromJson(_1bd);}return _1bd;},getKeys:function(_1be){if(!_1be){_1be=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1be)){throw new Error("Invalid namespace given: "+_1be);}var _1bf=dojox.flash.comm.getKeys(_1be);if(_1bf==null||_1bf=="null"){_1bf="";}_1bf=_1bf.split(",");_1bf.sort();return _1bf;},getNamespaces:function(){var _1c0=dojox.flash.comm.getNamespaces();if(_1c0==null||_1c0=="null"){_1c0=dojox.storage.DEFAULT_NAMESPACE;}_1c0=_1c0.split(",");_1c0.sort();return _1c0;},clear:function(_1c1){if(!_1c1){_1c1=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1c1)){throw new Error("Invalid namespace given: "+_1c1);}dojox.flash.comm.clear(_1c1);},remove:function(key,_1c2){if(!_1c2){_1c2=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1c2)){throw new Error("Invalid namespace given: "+_1c2);}dojox.flash.comm.remove(key,_1c2);},removeMultiple:function(keys,_1c3){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_1c3){_1c3=dojox.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_1c3)){throw new Error("Invalid namespace given: "+_1c3);}var _1c4=keys.join(",");dojox.flash.comm.removeMultiple(_1c4,_1c3);},isPermanent:function(){return true;},getMaximumSize:function(){return dojox.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){dojox.flash.comm.showSettings();dojox.flash.obj.setVisible(true);dojox.flash.obj.center();},hideSettingsUI:function(){dojox.flash.obj.setVisible(false);if(dojo.isFunction(dojox.storage.onHideSettingsUI)){dojox.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;dojox.storage.manager.loaded();},_onStatus:function(_1c5,key,_1c6){var ds=dojox.storage;var dfo=dojox.flash.obj;if(_1c5==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_1c5,key,null,_1c6);}}});dojox.storage.manager.register("dojox.storage.FlashStorageProvider",new dojox.storage.FlashStorageProvider());}if(!dojo._hasResource["dojox.storage._common"]){dojo._hasResource["dojox.storage._common"]=true;dojo.provide("dojox.storage._common");dojox.storage.manager.initialize();}if(!dojo._hasResource["dojox.storage"]){dojo._hasResource["dojox.storage"]=true;dojo.provide("dojox.storage");}if(!dojo._hasResource["dojox.rpc.OfflineRest"]){dojo._hasResource["dojox.rpc.OfflineRest"]=true;dojo.provide("dojox.rpc.OfflineRest");(function(){var Rest=dojox.rpc.Rest;var _1c7="dojox_rpc_OfflineRest";var _1c8;var _1c9=Rest._index;dojox.storage.manager.addOnLoad(function(){_1c8=dojox.storage.manager.available;for(var i in _1c9){_1ca(_1c9[i],i);}});var _1cb;function _1cc(key){return key.replace(/[^0-9A-Za-z_]/g,"_");};function _1ca(_1cd,id){if(_1c8&&!_1cb&&(id||(_1cd&&_1cd.__id))){dojox.storage.put(_1cc(id||_1cd.__id),typeof _1cd=="object"?dojox.json.ref.toJson(_1cd):_1cd,function(){},_1c7);}};function _1ce(_1cf){return _1cf instanceof Error&&(_1cf.status==503||_1cf.status>12000||!_1cf.status);};function _1d0(){if(_1c8){var _1d1=dojox.storage.get("dirty",_1c7);if(_1d1){for(var _1d2 in _1d1){_1d3(_1d2,_1d1);}}}};var _1d4;function sync(){_1d4.sendChanges();_1d4.downloadChanges();};var _1d5=setInterval(sync,15000);dojo.connect(document,"ononline",sync);_1d4=dojox.rpc.OfflineRest={turnOffAutoSync:function(){clearInterval(_1d5);},sync:sync,sendChanges:_1d0,downloadChanges:function(){},addStore:function(_1d6,_1d7){_1d4.stores.push(_1d6);_1d6.fetch({queryOptions:{cache:true},query:_1d7,onComplete:function(_1d8,args){_1d6._localBaseResults=_1d8;_1d6._localBaseFetch=args;}});}};_1d4.stores=[];var _1d9=Rest._get;Rest._get=function(_1da,id){try{_1d0();if(window.navigator&&navigator.onLine===false){throw new Error();}var dfd=_1d9(_1da,id);}catch(e){dfd=new dojo.Deferred();dfd.errback(e);}var sync=dojox.rpc._sync;dfd.addCallback(function(_1db){_1ca(_1db,_1da._getRequest(id).url);return _1db;});dfd.addErrback(function(_1dc){if(_1c8){if(_1ce(_1dc)){var _1dd={};var byId=function(id,_1de){if(_1dd[id]){return _1de;}var _1df=dojo.fromJson(dojox.storage.get(_1cc(id),_1c7))||_1de;_1dd[id]=_1df;for(var i in _1df){var val=_1df[i];id=val&&val.$ref;if(id){if(id.substring&&id.substring(0,4)=="cid:"){id=id.substring(4);}_1df[i]=byId(id,val);}}if(_1df instanceof Array){for(i=0;i<_1df.length;i++){if(_1df[i]===undefined){_1df.splice(i--,1);}}}return _1df;};_1cb=true;var _1e0=byId(_1da._getRequest(id).url);if(!_1e0){return _1dc;}_1cb=false;return _1e0;}else{return _1dc;}}else{if(sync){return new Error("Storage manager not loaded, can not continue");}dfd=new dojo.Deferred();dfd.addCallback(arguments.callee);dojox.storage.manager.addOnLoad(function(){dfd.callback();});return dfd;}});return dfd;};function _1e1(_1e2,_1e3,_1e4,_1e5,_1e6){if(_1e2=="delete"){dojox.storage.remove(_1cc(_1e3),_1c7);}else{dojox.storage.put(_1cc(_1e4),_1e5,function(){},_1c7);}var _1e7=_1e6&&_1e6._store;if(_1e7){_1e7.updateResultSet(_1e7._localBaseResults,_1e7._localBaseFetch);dojox.storage.put(_1cc(_1e6._getRequest(_1e7._localBaseFetch.query).url),dojox.json.ref.toJson(_1e7._localBaseResults),function(){},_1c7);}};dojo.addOnLoad(function(){dojo.connect(dojox.data,"restListener",function(_1e8){var _1e9=_1e8.channel;var _1ea=_1e8.event.toLowerCase();var _1eb=dojox.rpc.JsonRest&&dojox.rpc.JsonRest.getServiceAndId(_1e9).service;_1e1(_1ea,_1e9,_1ea=="post"?_1e9+_1e8.result.id:_1e9,dojo.toJson(_1e8.result),_1eb);});});var _1ec=Rest._change;Rest._change=function(_1ed,_1ee,id,_1ef){if(!_1c8){return _1ec.apply(this,arguments);}var _1f0=_1ee._getRequest(id).url;_1e1(_1ed,_1f0,dojox.rpc.JsonRest._contentId,_1ef,_1ee);var _1f1=dojox.storage.get("dirty",_1c7)||{};if(_1ed=="put"||_1ed=="delete"){var _1f2=_1f0;}else{_1f2=0;for(var i in _1f1){if(!isNaN(parseInt(i))){_1f2=i;}}_1f2++;}_1f1[_1f2]={method:_1ed,id:_1f0,content:_1ef};return _1d3(_1f2,_1f1);};function _1d3(_1f3,_1f4){var _1f5=_1f4[_1f3];var _1f6=dojox.rpc.JsonRest.getServiceAndId(_1f5.id);var _1f7=_1ec(_1f5.method,_1f6.service,_1f6.id,_1f5.content);_1f4[_1f3]=_1f5;dojox.storage.put("dirty",_1f4,function(){},_1c7);_1f7.addBoth(function(_1f8){if(_1ce(_1f8)){return null;}var _1f9=dojox.storage.get("dirty",_1c7)||{};delete _1f9[_1f3];dojox.storage.put("dirty",_1f9,function(){},_1c7);return _1f8;});return _1f7;};dojo.connect(_1c9,"onLoad",_1ca);dojo.connect(_1c9,"onUpdate",_1ca);})();}
